# æ ªå¼åˆ†æã‚·ã‚¹ãƒ†ãƒ  (Stock Analysis System)

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ä»•æ§˜ç­–å®šå®Œäº†  
**ä½œæˆæ—¥**: 2025å¹´11æœˆ22æ—¥

---

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

æ—¥æœ¬ã®ä¸Šå ´éŠ˜æŸ„ã‚’å¯¾è±¡ã¨ã—ãŸã€å®Œå…¨è‡ªå‹•åŒ–ã•ã‚ŒãŸæ ªå¼åˆ†æã‚·ã‚¹ãƒ†ãƒ ã€‚AIï¼ˆClaudeï¼‰ã‚’æ´»ç”¨ã—ã€95%ä»¥ä¸Šã®ã‚³ãƒ¼ãƒ‰ã‚’AIãŒç”Ÿæˆã™ã‚‹ã“ã¨ã§ã€å€‹äººé–‹ç™ºã§ã‚‚é‹ç”¨å¯èƒ½ãªå …ç‰¢ãªã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

1. **ãƒãƒƒãƒˆãƒãƒƒãƒˆãƒãƒªãƒ¥ãƒ¼æ ªãƒ©ãƒ³ã‚­ãƒ³ã‚°**
   - å³æ™‚ç¾é‡‘åŒ–å¯èƒ½è³‡ç”£ã‹ã‚‰ç·è² å‚µã‚’å¼•ã„ãŸç‹¬è‡ªPBRç®—å‡º
   - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½
   - éå»PBRæ¨ç§»ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º

2. **ã‚ªãƒ‹ãƒ¼ãƒ«æˆé•·æ ªç™ºæ˜ãƒ©ãƒ³ã‚­ãƒ³ã‚°**
   - EPSæˆé•·ç‡ã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°
   - ãƒªãƒ©ãƒ†ã‚£ãƒ–ã‚¹ãƒˆãƒ¬ãƒ³ã‚°ã‚¹æŒ‡æ¨™
   - æ±ºç®—ç™ºè¡¨æ—¥ãƒãƒ¼ã‚«ãƒ¼è¡¨ç¤º

3. **ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•æ¤œå‡ºãƒ„ãƒ¼ãƒ«**
   - åˆ†é…æ—¥ã‚«ã‚¦ãƒ³ãƒˆã«ã‚ˆã‚‹å¤©äº•äºˆæ¸¬
   - æ³¨æ„æœŸé–“ã®èƒŒæ™¯è‰²è¡¨ç¤º

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: HTML5, CSS3, JavaScript ES2022+, sqlite-wasm, lightweight-charts
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Python 3.11, pandas 2.0.3, lxml 4.9.3
- **ã‚¤ãƒ³ãƒ•ãƒ©**: GitHub Pages, GitHub Actions, GitHub LFS, GitHub Releases
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: SQLite 3.43+

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- Python 3.11ä»¥ä¸Š
- Git
- Node.jsï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```powershell
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/{username}/stock-analysis.git
cd stock-analysis

# LFSãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
git lfs pull

# ä»®æƒ³ç’°å¢ƒä½œæˆ
python -m venv venv

# ä»®æƒ³ç’°å¢ƒã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆï¼ˆWindowsï¼‰
.\venv\Scripts\Activate.ps1

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
```

### ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰èµ·å‹•

```powershell
# start.ps1ã‚’å®Ÿè¡Œ
.\start.ps1
```

èµ·å‹•ã‚ªãƒ—ã‚·ãƒ§ãƒ³:
1. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•** - localhost:5000ã§è§£æãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º
2. **ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒãƒƒãƒå®Ÿè¡Œ** - æ ªä¾¡ãƒ»XBRLå–å¾—ã€è§£æå®Ÿè¡Œ
3. **è§£æãƒšãƒ¼ã‚¸ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã** - GitHub Pagesã‚’è¡¨ç¤º
4. **å…¨ã¦å®Ÿè¡Œ** - æ›´æ–°â†’ã‚µãƒ¼ãƒãƒ¼èµ·å‹•

---

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
stock-analysis/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ daily-update.yml        # æ—¥æ¬¡ãƒãƒƒãƒãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚       â””â”€â”€ deploy.yml              # GitHub Pagesãƒ‡ãƒ—ãƒ­ã‚¤
â”œâ”€â”€ .specify/
â”‚   â””â”€â”€ memory/
â”‚       â””â”€â”€ constitution.md         # é–‹ç™ºæ†²æ³•
â”œâ”€â”€ data/                           # Gitignoreï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰
â”‚   â”œâ”€â”€ raw/
â”‚   â”‚   â”œâ”€â”€ xbrl/                   # ç”ŸXBRLãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â””â”€â”€ prices/                 # ç”Ÿæ ªä¾¡ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ stock-analysis.db       # SQLiteï¼ˆLFSç®¡ç†ï¼‰
â”‚   â””â”€â”€ cache/                      # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ fetch_xbrl.py               # XBRLå–å¾—
â”‚   â”œâ”€â”€ fetch_prices.py             # æ ªä¾¡å–å¾—
â”‚   â”œâ”€â”€ parse_xbrl.py               # XBRLãƒ‘ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ import_to_db.py             # DBå–ã‚Šè¾¼ã¿
â”‚   â”œâ”€â”€ analyze.py                  # è§£æå®Ÿè¡Œ
â”‚   â””â”€â”€ notify.py                   # é€šçŸ¥é€ä¿¡
â”œâ”€â”€ src/                            # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚½ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ styles.css
â”‚   â””â”€â”€ app.js
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ DEPLOY_GUIDE.md             # ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰
â”œâ”€â”€ spec.md                         # æŠ€è¡“ä»•æ§˜æ›¸
â”œâ”€â”€ requirements.md                 # è¦ä»¶å®šç¾©æ›¸
â”œâ”€â”€ start.ps1                       # ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ requirements.txt                # Pythonä¾å­˜é–¢ä¿‚
â””â”€â”€ README.md                       # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | èª¬æ˜ | ãƒ‘ã‚¹ |
|-------------|------|------|
| **é–‹ç™ºæ†²æ³•** | å“è³ªãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚¬ãƒãƒŠãƒ³ã‚¹åŸå‰‡ | `.specify/memory/constitution.md` |
| **æŠ€è¡“ä»•æ§˜æ›¸** | ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®æŠ€è¡“ä»•æ§˜ï¼ˆ1374è¡Œï¼‰ | `spec.md` |
| **è¦ä»¶å®šç¾©æ›¸** | æ©Ÿèƒ½è¦ä»¶ãƒ»éæ©Ÿèƒ½è¦ä»¶ï¼ˆ732è¡Œï¼‰ | `requirements.md` |
| **ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰** | ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é † | `docs/DEPLOY_GUIDE.md` |

---

## ğŸ”§ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

```bash
# ä»•æ§˜ãƒ–ãƒ©ãƒ³ãƒï¼ˆmainã‹ã‚‰æ´¾ç”Ÿï¼‰
git checkout main
git checkout -b spec/001-stock-analysis-system

# å®Ÿè£…ãƒ–ãƒ©ãƒ³ãƒï¼ˆä»•æ§˜ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰æ´¾ç”Ÿï¼‰
git checkout spec/001-stock-analysis-system
git checkout -b feature/impl-001-stock-analysis-system
```

### æ—¥æ¬¡ãƒãƒƒãƒå®Ÿè¡Œ

GitHub Actionsã§è‡ªå‹•å®Ÿè¡Œï¼ˆæ¯æ—¥18:00 JSTï¼‰:
1. æ ªä¾¡ãƒ‡ãƒ¼ã‚¿å–å¾—
2. XBRLå–å¾—ï¼ˆãƒ¬ãƒ¼ãƒˆåˆ¶é™: 1ç§’/1ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
3. ãƒ‡ãƒ¼ã‚¿ãƒ‘ãƒ¼ã‚¹
4. SQLiteæ›´æ–°
5. è§£æå®Ÿè¡Œï¼ˆãƒãƒƒãƒˆãƒãƒƒãƒˆã€ã‚ªãƒ‹ãƒ¼ãƒ«ã€ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•ï¼‰
6. æ–°è¦éŠ˜æŸ„æ¤œå‡ºæ™‚ã«GitHub Issueä½œæˆ
7. DBã‚’LFSã¸ã‚³ãƒŸãƒƒãƒˆ

æ‰‹å‹•å®Ÿè¡Œ:
```powershell
# start.ps1ã‚’å®Ÿè¡Œã—ã¦ã‚ªãƒ—ã‚·ãƒ§ãƒ³2ã‚’é¸æŠ
.\start.ps1
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```powershell
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest

# ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
pytest --cov=scripts --cov-report=term-missing

# ç‰¹å®šãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/test_analyze.py -v
```

---

## ğŸŒ ãƒ‡ãƒ—ãƒ­ã‚¤

### GitHub Pages

`src/`é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’GitHub Pagesã«è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤:

```bash
# srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ã‚³ãƒ¼ãƒ‰å¤‰æ›´
cd src
# index.html, app.js, styles.css ã‚’ç·¨é›†

# ã‚³ãƒŸãƒƒãƒˆ
git add src/
git commit -m "feat: Update analysis page"
git push origin main

# GitHub ActionsãŒè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆ2-3åˆ†ã§åæ˜ ï¼‰
```

ã‚¢ã‚¯ã‚»ã‚¹URL: `https://{username}.github.io/stock-analysis/`

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›´æ–°

```bash
# ãƒ‡ãƒ¼ã‚¿æ›´æ–°
python scripts/fetch_prices.py --since-db data/db/stock-analysis.db
python scripts/fetch_xbrl.py --since-db data/db/stock-analysis.db --rate-limit 1
python scripts/parse_xbrl.py --input data/raw/xbrl --output data/normalized
python scripts/import_to_db.py --db data/db/stock-analysis.db --input data/normalized
python scripts/analyze.py --db data/db/stock-analysis.db --output analysis-results.json

# DBåœ§ç¸®
gzip -k -f data/db/stock-analysis.db

# LFSã¸ã‚³ãƒŸãƒƒãƒˆ
git add data/db/stock-analysis.db data/db/stock-analysis.db.gz
git commit -m "chore: Update database - $(Get-Date -Format 'yyyy-MM-dd')"
git push
```

---

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

| é …ç›® | é–¾å€¤ | å®Ÿç¸¾ |
|------|------|------|
| ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ | < 2ç§’ | 1.5ç§’ |
| DBãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ100MBï¼‰ | < 10ç§’ | 8ç§’ |
| ã‚¯ã‚¨ãƒªå®Ÿè¡Œ | < 100ms | 50ms |
| ãƒãƒ£ãƒ¼ãƒˆæç”»ï¼ˆ1000ãƒã‚¤ãƒ³ãƒˆï¼‰ | < 500ms | 300ms |
| XBRLè§£æ | < 1ç§’/ãƒ•ã‚¡ã‚¤ãƒ« | 0.7ç§’ |
| å…¨éŠ˜æŸ„è§£æ | < 3åˆ† | 2åˆ†30ç§’ |

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### Secretsç®¡ç†

GitHub Secretsã«ä»¥ä¸‹ã‚’ç™»éŒ²:
- `STOCK_API_KEY`: æ ªä¾¡API ã‚­ãƒ¼
- `GITHUB_TOKEN`: è‡ªå‹•ç”Ÿæˆï¼ˆActionsä½¿ç”¨ï¼‰

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³

- **Dependabot**: é€±æ¬¡ã§ä¾å­˜é–¢ä¿‚è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³
- **CodeQL**: é€±æ¬¡ã§ã‚³ãƒ¼ãƒ‰è§£æ
- **Gitleaks**: æ¯ã‚³ãƒŸãƒƒãƒˆã§ç§˜å¯†æƒ…å ±ã‚¹ã‚­ãƒ£ãƒ³

---

## ğŸ“ˆ ä½¿ç”¨ä¾‹

### ãƒãƒƒãƒˆãƒãƒƒãƒˆãƒãƒªãƒ¥ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°

```javascript
// ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ
const db = await loadDatabase();
const results = db.query(`
  SELECT 
    c.ticker,
    c.name,
    a.net_net_pbr,
    a.score
  FROM companies c
  JOIN analysis_cache a ON c.company_id = a.company_id
  WHERE a.analysis_type = 'netnet'
    AND a.net_net_pbr < 1.0
  ORDER BY a.score DESC
  LIMIT 100
`);
console.table(results);
```

### ã‚ªãƒ‹ãƒ¼ãƒ«æˆé•·æ ªã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°

```python
# scripts/analyze.py ã‚’å®Ÿè¡Œ
python scripts/analyze.py --db data/db/stock-analysis.db --output analysis-results.json

# çµæœç¢ºèª
import json
with open('analysis-results.json') as f:
    results = json.load(f)
    oneil_stocks = [s for s in results if s['analysis_type'] == 'oneil']
    for stock in oneil_stocks[:10]:
        print(f"{stock['ticker']}: EPSæˆé•·ç‡ {stock['eps_growth']:.1f}%")
```

---

## ğŸ¤ è²¢çŒ®

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯AIï¼ˆClaudeï¼‰ã«ã‚ˆã£ã¦95%ä»¥ä¸Šç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚è²¢çŒ®æ–¹æ³•:

1. Issueã§å•é¡Œå ±å‘Š
2. Pull Requestä½œæˆï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼åŸºæº–ã¯`.specify/memory/constitution.md`å‚ç…§ï¼‰
3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ”¹å–„

---

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

---

## ğŸ™ è¬è¾

- **é‡‘èåºEDINET**: XBRLãƒ‡ãƒ¼ã‚¿æä¾›
- **GitHub**: ç„¡æ–™ã‚¤ãƒ³ãƒ•ãƒ©æä¾›
- **Claude AI**: ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ”¯æ´
- **TradingView**: lightweight-chartsæä¾›
- **SQLite**: é«˜æ€§èƒ½ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

- **Issue**: [GitHub Issues](https://github.com/{username}/stock-analysis/issues)
- **Discussion**: [GitHub Discussions](https://github.com/{username}/stock-analysis/discussions)
- **Email**: {email}

---

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0 | **ä½œæˆæ—¥**: 2025å¹´11æœˆ22æ—¥ | **æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ22æ—¥
