# æ ªå¼åˆ†æã‚·ã‚¹ãƒ†ãƒ  - å®Œå…¨å®Ÿè£…ä»•æ§˜æ›¸ï¼ˆAIå†ç¾ç”¨ï¼‰

**ğŸ“… æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ22æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Phase 1å®Œäº†ã€Phase 2-5å®Ÿè£…ä¸­  
**ãƒ†ã‚¹ãƒˆ**: 8/8 é€šé (100%) - DBåˆæœŸåŒ–ãƒ†ã‚¹ãƒˆå®Œäº†  
**ãƒ‡ãƒ—ãƒ­ã‚¤URL**: https://j1921604.github.io/stock-analysis/  
**GitHubãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/J1921604/stock-analysis  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0-alpha

---

## ğŸ¯ ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦

ã“ã®ä»•æ§˜æ›¸ã¯ã€**ä»–ã®AIãŒå®Œç’§ã«å†ç¾ã§ãã‚‹**ã“ã¨ã‚’ç›®çš„ã¨ã—ãŸå®Œå…¨ãªå®Ÿè£…ä»•æ§˜æ›¸ã§ã™ã€‚
ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã€è¨­å®šã€ãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ãŒç¶²ç¾…ã•ã‚Œã¦ã„ã¾ã™ã€‚

### æ†²æ³•éµå®ˆçŠ¶æ³

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯`.specify/memory/constitution.md`ã«å®šç¾©ã•ã‚ŒãŸé–‹ç™ºæ†²æ³•ã‚’100ï¼…éµå®ˆã—ã¾ã™ã€‚

```mermaid
flowchart TB
    subgraph Constitution["é–‹ç™ºæ†²æ³•"]
        A1[å“è³ªåŸå‰‡]
        A2[ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸå‰‡]
        A3[ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º]
        A4[ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶]
    end
    
    subgraph Implementation["å®Ÿè£…çŠ¶æ³"]
        B1[âœ… Phase 1: åŸºç›¤æ§‹ç¯‰å®Œäº†]
        B2[ğŸŸ¡ Phase 2: ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³]
        B3[âšª Phase 3: è§£æã‚¨ãƒ³ã‚¸ãƒ³]
        B4[ğŸŸ¡ Phase 4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰]
        B5[âšª Phase 5: è‡ªå‹•åŒ–]
    end
    
    subgraph Quality["å“è³ªä¿è¨¼"]
        C1[âœ… ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸100%]
        C2[âœ… GitHub Actions CI/CD]
        C3[âœ… Git LFSå¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†]
        C4[âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶éµå®ˆ]
    end
    
    A1 --> B1
    A2 --> C4
    A3 --> C1
    A4 --> C2
    
    B1 --> B2
    B2 --> B3
    B3 --> B4
    B4 --> B5
    
    style B1 fill:#c8e6c9
    style B2 fill:#fff9c4
    style B3 fill:#e0e0e0
    style B4 fill:#fff9c4
    style B5 fill:#e0e0e0
    style C1 fill:#c8e6c9
    style C2 fill:#c8e6c9
    style C3 fill:#c8e6c9
    style C4 fill:#c8e6c9
```

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
3. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ )
4. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
5. [ç’°å¢ƒæ§‹ç¯‰æ‰‹é †](#ç’°å¢ƒæ§‹ç¯‰æ‰‹é †)
6. [ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜](#ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜)
7. [æ©Ÿèƒ½å®Ÿè£…è©³ç´°](#æ©Ÿèƒ½å®Ÿè£…è©³ç´°)
8. [ãƒ†ã‚¹ãƒˆä»•æ§˜](#ãƒ†ã‚¹ãƒˆä»•æ§˜)
9. [ãƒ‡ãƒ—ãƒ­ã‚¤ä»•æ§˜](#ãƒ‡ãƒ—ãƒ­ã‚¤ä»•æ§˜)
10. [é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼](#é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼)
11. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶)
12. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ç›®çš„

æ—¥æœ¬ã®ä¸Šå ´éŠ˜æŸ„ã‚’å¯¾è±¡ã¨ã—ãŸã€å®Œå…¨è‡ªå‹•åŒ–ã•ã‚ŒãŸæ ªå¼åˆ†æã‚·ã‚¹ãƒ†ãƒ ã€‚AIï¼ˆClaudeï¼‰ã‚’æ´»ç”¨ã—ã€95%ä»¥ä¸Šã®ã‚³ãƒ¼ãƒ‰ã‚’AIãŒç”Ÿæˆã™ã‚‹ã“ã¨ã§ã€å€‹äººé–‹ç™ºã§ã‚‚é‹ç”¨å¯èƒ½ãªå …ç‰¢ãªã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

- âœ… **ãƒãƒƒãƒˆãƒãƒƒãƒˆæ ªãƒ©ãƒ³ã‚­ãƒ³ã‚°**: å³æ™‚ç¾é‡‘åŒ–å¯èƒ½è³‡ç”£ã‹ã‚‰ç·è² å‚µã‚’å¼•ã„ãŸç‹¬è‡ªPBRç®—å‡º
- âœ… **O'Neilæˆé•·æ ªç™ºæ˜**: EPSæˆé•·ç‡ãƒ»ãƒªãƒ©ãƒ†ã‚£ãƒ–ã‚¹ãƒˆãƒ¬ãƒ³ã‚°ã‚¹æŒ‡æ¨™
- âœ… **ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•æ¤œå‡º**: åˆ†é…æ—¥ã‚«ã‚¦ãƒ³ãƒˆã«ã‚ˆã‚‹å¤©äº•äºˆæ¸¬
- âœ… **è‡ªå‹•ãƒ‡ãƒ¼ã‚¿æ›´æ–°**: EDINET API + Yahoo Finance API
- âœ… **GitHub Pagesè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**: æ¯æ—¥10:00 JSTè‡ªå‹•æ›´æ–°
- âœ… **å®Œå…¨æ—¥æœ¬èªå¯¾å¿œ**: UIã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### æ†²æ³•ï¼ˆé–‹ç™ºåŸå‰‡ï¼‰

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ (PR)**:

- PR-001: åˆæœŸãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ < 3ç§’
- PR-002: DBæ¤œç´¢ã‚¯ã‚¨ãƒª < 500ms
- PR-003: ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒãƒƒãƒ < 30åˆ†ï¼ˆå…¨éŠ˜æŸ„ï¼‰
- PR-004: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ < 2GBï¼ˆãƒ‡ãƒ¼ã‚¿å‡¦ç†æ™‚ï¼‰
- PR-005: GitHub Pages CDNé…ä¿¡ < 1ç§’

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ (SR)**:

- SR-001: APIã‚­ãƒ¼ã‚’GitHub Secretsã§ç®¡ç†ï¼ˆå¹³æ–‡ä¿å­˜ç¦æ­¢ï¼‰
- SR-002: XSSå¯¾ç­–ï¼ˆå…¥åŠ›å€¤ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼‰
- SR-003: SQLæ³¨å…¥å¯¾ç­–ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªï¼‰
- SR-004: ãƒ¬ãƒ¼ãƒˆåˆ¶é™éµå®ˆï¼ˆEDINET: 1ç§’/1ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- SR-005: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆtry-catchã€ãƒ­ã‚°å‡ºåŠ›ï¼‰

**ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¦ä»¶ (AR)**:

- AR-001: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯HTMLä½¿ç”¨
- AR-002: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
- AR-003: é©åˆ‡ãªã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ï¼ˆWCAG 2.1 AAæº–æ‹ ï¼‰
- AR-004: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œï¼‰

**ãƒ†ã‚¹ãƒˆè¦ä»¶ (TR)**:

- TR-001: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 100%
- TR-002: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ < 30ç§’
- TR-003: å…¨æ©Ÿèƒ½ã«å˜ä½“ãƒ†ã‚¹ãƒˆ + çµ±åˆãƒ†ã‚¹ãƒˆ
- TR-004: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ç¶²ç¾…ï¼ˆç©ºãƒ‡ãƒ¼ã‚¿ã€ç•°å¸¸å€¤ï¼‰

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```json
{
  "html": "HTML5",
  "css": "CSS3 (Flexbox, Grid)",
  "javascript": "ES2022+",
  "database": "sqlite-wasm 3.43+",
  "charts": "lightweight-charts 4.0.0"
}
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

```json
{
  "language": "Python 3.11",
  "libraries": {
    "pandas": "2.0.3",
    "lxml": "4.9.3",
    "requests": "2.31.0",
    "pytest": "9.0.1",
    "pytest-cov": "7.0.0"
  }
}
```

### ã‚¤ãƒ³ãƒ•ãƒ©

```json
{
  "hosting": "GitHub Pages",
  "ci_cd": "GitHub Actions",
  "version_control": "Git + Git LFS",
  "database": "SQLite 3.43+ (Git LFSç®¡ç†)"
}
```
---

## ç’°å¢ƒæ§‹ç¯‰æ‰‹é †

### å‰ææ¡ä»¶

ä»¥ä¸‹ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„:

- **Python 3.11ä»¥ä¸Š** (`python --version`)
- **Git** (`git --version`)
- **Git LFS** (`git lfs version`)
- **pip** (`pip --version`)

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³

```powershell
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/J1921604/stock-analysis.git
cd stock-analysis

# Git LFSãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
git lfs pull
```

**ç¢ºèª**:
```powershell
# LFSãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
git lfs ls-files
# â†’ data/db/stock-analysis.db ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãš
```

### ã‚¹ãƒ†ãƒƒãƒ—2: Pythonä»®æƒ³ç’°å¢ƒä½œæˆ

```powershell
# ä»®æƒ³ç’°å¢ƒä½œæˆ
py -m venv venv

# ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆï¼ˆWindows PowerShellï¼‰
.\venv\Scripts\Activate.ps1

# ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆç¢ºèª
(venv) PS C:\...\stock-analysis>
```

**ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**:

PowerShellå®Ÿè¡Œãƒãƒªã‚·ãƒ¼ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆ:
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```powershell
# pipã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
py -m pip install --upgrade pip

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
```

**ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§** (`requirements.txt`):
```
pandas==2.0.3
lxml==4.9.3
requests==2.31.0
pytest==9.0.1
pytest-cov==7.0.0
```

**ç¢ºèª**:
```powershell
pip list | Select-String "pandas|lxml|requests|pytest"
```

### ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–

```powershell
# DBåˆæœŸåŒ–ï¼ˆã‚¹ã‚­ãƒ¼ãƒä½œæˆã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥ï¼‰
py scripts/init_db.py --db data/db/stock-analysis.db --schema schema.sql --force

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥
py scripts/insert_sample_data.py --db data/db/stock-analysis.db
```

**ç¢ºèª**:
```powershell
# ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ç¢ºèª
py -c "import sqlite3; conn=sqlite3.connect('data/db/stock-analysis.db'); c=conn.cursor(); c.execute('SELECT COUNT(*) FROM companies'); print('Companies:', c.fetchone()[0])"
# â†’ Companies: 5
```

### ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```powershell
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
py -m pytest tests/ -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
py -m pytest tests/ --cov=scripts --cov-report=term
```

**æœŸå¾…çµæœ**:
```
========= 8 passed in 1.39s =========
```

### ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼èµ·å‹•

```powershell
# ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰èµ·å‹•
.\start.ps1

# ã¾ãŸã¯ã€HTTPã‚µãƒ¼ãƒãƒ¼ç›´æ¥èµ·å‹•
cd src
py -m http.server 5000
```

**ç¢ºèª**:

ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã«ã‚¢ã‚¯ã‚»ã‚¹:
- http://localhost:5000 â†’ ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸è¡¨ç¤º
- http://localhost:5000/pages/netnet.html â†’ ãƒãƒƒãƒˆãƒãƒƒãƒˆæ ªãƒ©ãƒ³ã‚­ãƒ³ã‚°

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ç¢ºèª

```powershell
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆï¼ˆåˆå›ã®ã¿ï¼‰
py scripts/create_dirs.py
```

**ä½œæˆã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**:
```
data/
â”œâ”€â”€ raw/
â”‚   â”œâ”€â”€ xbrl/
â”‚   â”œâ”€â”€ prices/
â”‚   â””â”€â”€ topix/
â”œâ”€â”€ db/
â”œâ”€â”€ cache/
â”‚   â””â”€â”€ parsed/
â””â”€â”€ analysis/
logs/
```

### ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

APIã‚­ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:

```powershell
# .envãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
@"
# EDINET APIï¼ˆAPIã‚­ãƒ¼ä¸è¦ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®ã¿ï¼‰
EDINET_API_BASE_URL=https://disclosure.edinet-fsa.go.jp/api/v1

# Yahoo Financeï¼ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…éƒ¨ã§è‡ªå‹•å‡¦ç†ï¼‰
# ç‰¹åˆ¥ãªè¨­å®šä¸è¦

# GitHubï¼ˆé€šçŸ¥ç”¨ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
# GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxx
"@ | Out-File -FilePath .env -Encoding utf8
```

**.gitignoreç¢ºèª**:
```gitignore
.env
.env.*
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã‚¨ãƒ©ãƒ¼1: `ModuleNotFoundError: No module named 'pandas'`

**åŸå› **: ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**è§£æ±ºç­–**:
```powershell
pip install -r requirements.txt
```

#### ã‚¨ãƒ©ãƒ¼2: `FileNotFoundError: [Errno 2] No such file or directory: 'data/db/stock-analysis.db'`

**åŸå› **: Git LFSãƒ•ã‚¡ã‚¤ãƒ«æœªå–å¾—

**è§£æ±ºç­–**:
```powershell
git lfs pull
```

#### ã‚¨ãƒ©ãƒ¼3: `PermissionError: [WinError 5] ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸ`

**åŸå› **: PowerShellå®Ÿè¡Œãƒãƒªã‚·ãƒ¼åˆ¶é™

**è§£æ±ºç­–**:
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

#### ã‚¨ãƒ©ãƒ¼4: `Database is locked`

**åŸå› **: è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ã§DBåŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹

**è§£æ±ºç­–**:
```powershell
# ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†
taskkill /F /IM python.exe

# ã¾ãŸã¯ã€DBå†ä½œæˆ
py scripts/init_db.py --db data/db/stock-analysis.db --schema schema.sql --force
```

```
stock-analysis/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ copilot-commit-message-instructions.md  # Copilotè¨­å®š
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ deploy.yml                          # GitHub Pagesãƒ‡ãƒ—ãƒ­ã‚¤
â”œâ”€â”€ .specify/
â”‚   â””â”€â”€ memory/
â”‚       â”œâ”€â”€ constitution.md                     # é–‹ç™ºæ†²æ³•
â”‚       â””â”€â”€ constitution.pdf                    # PDFç‰ˆæ†²æ³•
â”œâ”€â”€ data/                                       # Gitignoreï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰
â”‚   â”œâ”€â”€ raw/
â”‚   â”‚   â”œâ”€â”€ xbrl/                               # EDINET XBRLãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ prices/                             # Yahoo Financeæ ªä¾¡CSV
â”‚   â”‚   â””â”€â”€ topix/                              # TOPIXæŒ‡æ•°ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ stock-analysis.db                   # SQLiteï¼ˆGit LFSç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ cache/
â”‚   â”‚   â””â”€â”€ parsed/                             # ãƒ‘ãƒ¼ã‚¹æ¸ˆã¿XBRLã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”‚   â””â”€â”€ analysis/                               # è§£æçµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ DEPLOY_GUIDE.md                         # ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †æ›¸
â”‚   â”œâ”€â”€ IMPLEMENTATION_REPORT.md                # å®Ÿè£…ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ å®Œå…¨ä»•æ§˜æ›¸.md                           # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ logs/                                       # ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆGitignoreï¼‰
â”‚   â””â”€â”€ .gitkeep
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ init_db.py                              # DBåˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ create_dirs.py                          # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆ
â”‚   â””â”€â”€ insert_sample_data.py                   # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥
â”œâ”€â”€ specs/
â”‚   â”œâ”€â”€ 001-stock-analysis-system/
â”‚   â”‚   â”œâ”€â”€ spec.md                             # è©³ç´°ä»•æ§˜æ›¸ï¼ˆ2,155è¡Œï¼‰
â”‚   â”‚   â”œâ”€â”€ spec.pdf                            # PDFç‰ˆä»•æ§˜æ›¸
â”‚   â”‚   â””â”€â”€ checklists/
â”‚   â”‚       â”œâ”€â”€ requirements.md                 # è¦ä»¶ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
â”‚   â”‚       â””â”€â”€ requirements.pdf                # PDFç‰ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
â”‚   â””â”€â”€ feature/
â”‚       â””â”€â”€ impl-001-stock-analysis-system/
â”‚           â”œâ”€â”€ plan.md                         # å®Ÿè£…è¨ˆç”»ï¼ˆ3,840è¡Œï¼‰
â”‚           â”œâ”€â”€ plan.pdf                        # PDFç‰ˆè¨ˆç”»
â”‚           â”œâ”€â”€ tasks.md                        # ã‚¿ã‚¹ã‚¯ä¸€è¦§ï¼ˆ3,735è¡Œï¼‰
â”‚           â””â”€â”€ tasks.pdf                       # PDFç‰ˆã‚¿ã‚¹ã‚¯
â”œâ”€â”€ src/                                        # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆé™çš„HTMLï¼‰
â”‚   â”œâ”€â”€ index.html                              # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ styles.css                              # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ netnet.html                         # ãƒãƒƒãƒˆãƒãƒƒãƒˆæ ªãƒ©ãƒ³ã‚­ãƒ³ã‚°
â”‚       â”œâ”€â”€ oneil.html                          # O'Neilæˆé•·æ ªç™ºæ˜
â”‚       â””â”€â”€ market-top.html                     # ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•æ¤œå‡º
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_init_db.py                         # DBåˆæœŸåŒ–ãƒ†ã‚¹ãƒˆï¼ˆ8ãƒ†ã‚¹ãƒˆï¼‰
â”œâ”€â”€ .gitattributes                              # Git LFSè¨­å®š
â”œâ”€â”€ .gitignore                                  # Gité™¤å¤–è¨­å®š
â”œâ”€â”€ README.md                                   # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆREADME
â”œâ”€â”€ requirements.txt                            # Pythonä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”œâ”€â”€ schema.sql                                  # SQLiteã‚¹ã‚­ãƒ¼ãƒå®šç¾©
â””â”€â”€ start.ps1                                   # ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®è¨­è¨ˆæ€æƒ³

**åˆ†é›¢ã®åŸå‰‡ (Separation of Concerns)**:

- `data/`: ãƒ‡ãƒ¼ã‚¿å±¤ï¼ˆæ°¸ç¶šåŒ–ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
- `scripts/`: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤ï¼ˆãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼‰
- `src/`: ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆUIï¼‰
- `tests/`: ãƒ†ã‚¹ãƒˆå±¤ï¼ˆå“è³ªä¿è¨¼ï¼‰
- `docs/`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå±¤ï¼ˆä»•æ§˜ãƒ»æ‰‹é †ï¼‰
- `specs/`: ä»•æ§˜ç®¡ç†å±¤ï¼ˆè¦ä»¶å®šç¾©ãƒ»è¨ˆç”»ï¼‰

**Git LFSç®¡ç†å¯¾è±¡**:

```gitattributes
*.db filter=lfs diff=lfs merge=lfs -text
data/db/*.db filter=lfs diff=lfs merge=lfs -text
```

**Gitignoreé™¤å¤–å¯¾è±¡**:

```gitignore
# Python
__pycache__/
*.pyc
venv/

# Databaseï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰
data/raw/
data/cache/
logs/
*.log

# OS
.DS_Store
Thumbs.db
```
â”œâ”€â”€ specs/                             # ä»•æ§˜æ›¸
â”œâ”€â”€ package.json                       # NPMè¨­å®š
â”œâ”€â”€ tsconfig.json                      # TypeScriptè¨­å®š
â”œâ”€â”€ vite.config.ts                     # Viteè¨­å®š
â”œâ”€â”€ vitest.config.ts                   # Vitestè¨­å®š
â”œâ”€â”€ index.html                         # HTMLã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ start.ps1                          # ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ README.md                          # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆREADME
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### TodoItem

```typescript
interface TodoItem {
  /** ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè­˜åˆ¥å­ï¼ˆDate.now()ã§ç”Ÿæˆï¼‰ */
  id: number
  
  /** ã‚¿ã‚¹ã‚¯ã®å†…å®¹ï¼ˆ1-500æ–‡å­—ï¼‰ */
  text: string
  
  /** å®Œäº†çŠ¶æ…‹ãƒ•ãƒ©ã‚° */
  completed: boolean
  
---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ERå›³

```mermaid
erDiagram
    companies ||--o{ financials : "1:N"
    companies ||--o{ stock_prices : "1:N"
    companies ||--o{ analysis_cache : "1:N"
    companies ||--o{ notification_history : "1:N"
    
    companies {
        TEXT id PK "è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: 9501ï¼‰"
        TEXT name "ä¼æ¥­å"
        TEXT market "å¸‚å ´ï¼ˆæ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ ç­‰ï¼‰"
        TEXT sector "ã‚»ã‚¯ã‚¿ãƒ¼"
        INTEGER shares_outstanding "ç™ºè¡Œæ¸ˆæ ªå¼æ•°"
        REAL market_cap "æ™‚ä¾¡ç·é¡"
        TEXT created_at
        TEXT updated_at
    }
    
    financials {
        TEXT company_id FK
        TEXT filing_date PK
        REAL cash "ç¾é‡‘"
        REAL securities "æœ‰ä¾¡è¨¼åˆ¸"
        REAL receivables "å£²æ›é‡‘"
        REAL inventory "æ£šå¸è³‡ç”£"
        REAL total_assets "ç·è³‡ç”£"
        REAL liabilities "è² å‚µåˆè¨ˆ"
        REAL revenue "å£²ä¸Šé«˜"
        REAL net_income "ç´”åˆ©ç›Š"
        TEXT created_at
    }
    
    stock_prices {
        TEXT company_id FK
        TEXT date PK
        REAL open "å§‹å€¤"
        REAL high "é«˜å€¤"
        REAL low "å®‰å€¤"
        REAL close "çµ‚å€¤"
        INTEGER volume "å‡ºæ¥é«˜"
        TEXT created_at
    }
    
    analysis_cache {
        TEXT company_id FK
        TEXT analysis_type PK "netnet/oneil/market_top"
        TEXT calculated_at PK
        REAL netnet_pbr "NetNetPBR"
        REAL oneil_eps_3y "EPSæˆé•·ç‡ï¼ˆ3å¹´ï¼‰"
        REAL oneil_eps_5y "EPSæˆé•·ç‡ï¼ˆ5å¹´ï¼‰"
        REAL oneil_rs "ãƒªãƒ©ãƒ†ã‚£ãƒ–ã‚¹ãƒˆãƒ¬ãƒ³ã‚°ã‚¹"
        INTEGER market_top_count "åˆ†é…æ—¥ã‚«ã‚¦ãƒ³ãƒˆ"
        TEXT created_at
    }
    
    topix_data {
        TEXT date PK "æ—¥ä»˜"
        REAL close "çµ‚å€¤"
        INTEGER volume "å‡ºæ¥é«˜"
        TEXT created_at
    }
    
    notification_history {
        INTEGER id PK
        TEXT company_id FK
        TEXT notification_type "alert/warning/info"
        TEXT title "é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ«"
        TEXT body "é€šçŸ¥æœ¬æ–‡"
        INTEGER issue_number "GitHub Issueç•ªå·"
        TEXT created_at
    }
```

### ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©

#### companiesï¼ˆä¼æ¥­æƒ…å ±ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|--------|-----|------|------|
| id | TEXT | PK | è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: 9501ï¼‰ |
| name | TEXT | NOT NULL | ä¼æ¥­å |
| market | TEXT | | å¸‚å ´ï¼ˆæ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ ç­‰ï¼‰ |
| sector | TEXT | | ã‚»ã‚¯ã‚¿ãƒ¼ |
| shares_outstanding | INTEGER | | ç™ºè¡Œæ¸ˆæ ªå¼æ•° |
| market_cap | REAL | | æ™‚ä¾¡ç·é¡ï¼ˆå††ï¼‰ |
| created_at | TEXT | DEFAULT | ä½œæˆæ—¥æ™‚ |
| updated_at | TEXT | DEFAULT | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_companies_name` ON `(name)`
- `idx_companies_sector` ON `(sector)`

#### financialsï¼ˆè²¡å‹™ãƒ‡ãƒ¼ã‚¿ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|--------|-----|------|------|
| company_id | TEXT | FK | ä¼æ¥­ID |
| filing_date | TEXT | PK | æ±ºç®—æ—¥ï¼ˆYYYY-MM-DDï¼‰ |
| cash | REAL | | ç¾é‡‘åŠã³ç¾é‡‘åŒç­‰ç‰©ï¼ˆå††ï¼‰ |
| securities | REAL | | æœ‰ä¾¡è¨¼åˆ¸ï¼ˆå††ï¼‰ |
| receivables | REAL | | å£²æ›é‡‘ï¼ˆå††ï¼‰ |
| inventory | REAL | | æ£šå¸è³‡ç”£ï¼ˆå††ï¼‰ |
| total_assets | REAL | | ç·è³‡ç”£ï¼ˆå††ï¼‰ |
| liabilities | REAL | | è² å‚µåˆè¨ˆï¼ˆå††ï¼‰ |
| revenue | REAL | | å£²ä¸Šé«˜ï¼ˆå††ï¼‰ |
| net_income | REAL | | ç´”åˆ©ç›Šï¼ˆå††ï¼‰ |
| created_at | TEXT | DEFAULT | ä½œæˆæ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_financials_company_date` ON `(company_id, filing_date DESC)`
- `idx_financials_filing_date` ON `(filing_date DESC)`

**å¤–éƒ¨ã‚­ãƒ¼**:
- `company_id` REFERENCES `companies(id)` ON DELETE CASCADE

#### stock_pricesï¼ˆæ ªä¾¡ãƒ‡ãƒ¼ã‚¿ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|--------|-----|------|------|
| company_id | TEXT | FK | ä¼æ¥­ID |
| date | TEXT | PK | æ—¥ä»˜ï¼ˆYYYY-MM-DDï¼‰ |
| open | REAL | | å§‹å€¤ï¼ˆå††ï¼‰ |
| high | REAL | | é«˜å€¤ï¼ˆå††ï¼‰ |
| low | REAL | | å®‰å€¤ï¼ˆå††ï¼‰ |
| close | REAL | NOT NULL | çµ‚å€¤ï¼ˆå††ï¼‰ |
| volume | INTEGER | | å‡ºæ¥é«˜ |
| created_at | TEXT | DEFAULT | ä½œæˆæ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_stock_prices_company_date` ON `(company_id, date DESC)`
- `idx_stock_prices_date` ON `(date DESC)`

**å¤–éƒ¨ã‚­ãƒ¼**:
- `company_id` REFERENCES `companies(id)` ON DELETE CASCADE

#### analysis_cacheï¼ˆè§£æã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|--------|-----|------|------|
| company_id | TEXT | FK | ä¼æ¥­ID |
| analysis_type | TEXT | PK | è§£æã‚¿ã‚¤ãƒ—ï¼ˆnetnet/oneil/market_topï¼‰ |
| calculated_at | TEXT | PK | è¨ˆç®—æ—¥æ™‚ |
| netnet_pbr | REAL | | NetNetPBR |
| oneil_eps_3y | REAL | | EPSæˆé•·ç‡ï¼ˆ3å¹´ï¼‰ |
| oneil_eps_5y | REAL | | EPSæˆé•·ç‡ï¼ˆ5å¹´ï¼‰ |
| oneil_rs | REAL | | ãƒªãƒ©ãƒ†ã‚£ãƒ–ã‚¹ãƒˆãƒ¬ãƒ³ã‚°ã‚¹ |
| market_top_count | INTEGER | | åˆ†é…æ—¥ã‚«ã‚¦ãƒ³ãƒˆï¼ˆ25æ—¥é–“ï¼‰ |
| created_at | TEXT | DEFAULT | ä½œæˆæ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_analysis_cache_netnet` ON `(analysis_type, netnet_pbr)` WHERE `analysis_type = 'netnet'`
- `idx_analysis_cache_oneil` ON `(analysis_type, oneil_rs)` WHERE `analysis_type = 'oneil'`

**å¤–éƒ¨ã‚­ãƒ¼**:
- `company_id` REFERENCES `companies(id)` ON DELETE CASCADE

#### topix_dataï¼ˆTOPIXãƒ‡ãƒ¼ã‚¿ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|--------|-----|------|------|
| date | TEXT | PK | æ—¥ä»˜ï¼ˆYYYY-MM-DDï¼‰ |
| close | REAL | NOT NULL | çµ‚å€¤ |
| volume | INTEGER | | å‡ºæ¥é«˜ |
| created_at | TEXT | DEFAULT | ä½œæˆæ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_topix_data_date` ON `(date DESC)`

#### notification_historyï¼ˆé€šçŸ¥å±¥æ­´ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|--------|-----|------|------|
| id | INTEGER | PK AUTOINCREMENT | é€šçŸ¥ID |
| company_id | TEXT | FK | ä¼æ¥­IDï¼ˆNULLå¯ï¼‰ |
| notification_type | TEXT | NOT NULL | alert/warning/info |
| title | TEXT | NOT NULL | é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ« |
| body | TEXT | | é€šçŸ¥æœ¬æ–‡ |
| issue_number | INTEGER | | GitHub Issueç•ªå· |
| created_at | TEXT | DEFAULT | ä½œæˆæ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_notification_history_type_date` ON `(notification_type, created_at DESC)`

**å¤–éƒ¨ã‚­ãƒ¼**:
- `company_id` REFERENCES `companies(id)` ON DELETE SET NULL

### ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿

ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™:

```sql
-- ä¼æ¥­: 5ç¤¾
SELECT id, name, market FROM companies;
-- 9501 | æ±äº¬é›»åŠ›ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ | æ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ 
-- 9502 | ä¸­éƒ¨é›»åŠ› | æ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ 
-- 6758 | ã‚½ãƒ‹ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ— | æ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ 
-- 9984 | ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ— | æ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ 
-- 9432 | æ—¥æœ¬é›»ä¿¡é›»è©± | æ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ 

-- è²¡å‹™ãƒ‡ãƒ¼ã‚¿: 5ä»¶ï¼ˆå„ç¤¾1ä»¶ï¼‰
SELECT company_id, filing_date, cash, liabilities FROM financials;

-- æ ªä¾¡ãƒ‡ãƒ¼ã‚¿: 450ä»¶ï¼ˆ90æ—¥ Ã— 5ç¤¾ï¼‰
SELECT COUNT(*) FROM stock_prices;
-- 450

-- TOPIXãƒ‡ãƒ¼ã‚¿: 90ä»¶ï¼ˆ90æ—¥åˆ†ï¼‰
SELECT COUNT(*) FROM topix_data;
-- 90
```

**ãƒ‘ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**:

- URLå½¢å¼: `/{name}-todo`
- å°æ–‡å­—ã€ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Š
- ä¾‹: `/testuser-todo`, `/tanaka-todo`

---

## ç’°å¢ƒæ§‹ç¯‰æ‰‹é †

### å‰ææ¡ä»¶

- Node.js 16.xä»¥ä¸Š
- npm 8.xä»¥ä¸Š
- Git
- PowerShell (Windows) ã¾ãŸã¯ bash (Mac/Linux)

### 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³

```powershell
git clone https://github.com/J1921604/ToDo.git
cd ToDo
```

### 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```powershell
npm install
```

### 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

**æ–¹æ³•A: ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰èµ·å‹•ï¼ˆWindowsï¼‰**

```powershell
.\start.ps1
```

è‡ªå‹•çš„ã«ä»¥ä¸‹ãŒå®Ÿè¡Œã•ã‚Œã¾ã™:

1. ä¾å­˜é–¢ä¿‚ç¢ºèªãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
2. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ1234ï¼‰
3. ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•èµ·å‹• (http://localhost:1234)

**æ–¹æ³•B: æ‰‹å‹•èµ·å‹•**

```powershell
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:1234 ã‚’é–‹ã

### 4. å‹ãƒã‚§ãƒƒã‚¯

```powershell
npm run type-check
# ã¾ãŸã¯
npx tsc --noEmit
```

**æœŸå¾…çµæœ**: `0ã‚¨ãƒ©ãƒ¼`

### 5. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```powershell
npm run test
```

**æœŸå¾…çµæœ**: `106/106 PASS` (100%)

### 6. ãƒ“ãƒ«ãƒ‰

```powershell
npm run build
```

**å‡ºåŠ›å…ˆ**: `dist/`

### 7. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

```powershell
npm run preview
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:4173/ToDo/ ã‚’é–‹ã

---

---

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜

### ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œæ‰‹é †

**é‡è¦**: ç¾åœ¨ã¯ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ã¿ã€‚å®Œå…¨ãªãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆPhase 2ï¼‰ã¯ä»Šå¾Œå®Ÿè£…äºˆå®šã€‚

#### ç¾åœ¨ã®æ‰‹é †ï¼ˆã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰

```powershell
# 1. DBåˆæœŸåŒ–
py scripts/init_db.py --db data/db/stock-analysis.db --schema schema.sql --force

# 2. ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥
py scripts/insert_sample_data.py --db data/db/stock-analysis.db

# 3. ãƒ‡ãƒ¼ã‚¿ç¢ºèª
py -c "import sqlite3; conn=sqlite3.connect('data/db/stock-analysis.db'); c=conn.cursor(); c.execute('SELECT COUNT(*) FROM companies'); print('Companies:', c.fetchone()[0]); c.execute('SELECT COUNT(*) FROM stock_prices'); print('Stock Prices:', c.fetchone()[0]); c.execute('SELECT COUNT(*) FROM topix_data'); print('TOPIX:', c.fetchone()[0])"
```

**æŒ¿å…¥ã•ã‚Œã‚‹ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿**:
- ä¼æ¥­: 5ç¤¾ï¼ˆãƒˆãƒ¨ã‚¿ã€ã‚­ãƒ¼ã‚¨ãƒ³ã‚¹ã€ã‚½ãƒ‹ãƒ¼ã€ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯Gã€NTTï¼‰
- è²¡å‹™ãƒ‡ãƒ¼ã‚¿: 5ä»¶
- æ ªä¾¡ãƒ‡ãƒ¼ã‚¿: 450ä»¶ï¼ˆ90æ—¥ Ã— 5ç¤¾ï¼‰
- TOPIXãƒ‡ãƒ¼ã‚¿: 90ä»¶

#### ä»Šå¾Œã®å®Ÿè£…äºˆå®šï¼ˆPhase 2: ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼‰

```powershell
# 1. XBRLå–å¾—ï¼ˆEDINET APIï¼‰
py scripts/fetch_xbrl.py --db data/db/stock-analysis.db --output data/raw/xbrl --since-db

# 2. æ ªä¾¡å–å¾—ï¼ˆYahoo Finance APIï¼‰
py scripts/fetch_prices.py --db data/db/stock-analysis.db --output data/raw/prices --since-db

# 3. XBRLãƒ‘ãƒ¼ã‚¹
py scripts/parse_xbrl.py --input data/raw/xbrl --output data/cache/parsed

# 4. DBã‚¤ãƒ³ãƒãƒ¼ãƒˆ
py scripts/import_to_db.py --db data/db/stock-analysis.db --financials data/cache/parsed --prices data/raw/prices

# 5. è§£æå®Ÿè¡Œï¼ˆPhase 3ï¼‰
py scripts/analyze_netnet.py --db data/db/stock-analysis.db
py scripts/analyze_oneil.py --db data/db/stock-analysis.db
py scripts/analyze_market_top.py --db data/db/stock-analysis.db
```

### æ©Ÿèƒ½ä»•æ§˜

#### 1. ãƒãƒƒãƒˆãƒãƒƒãƒˆæ ªãƒ©ãƒ³ã‚­ãƒ³ã‚° (`src/pages/netnet.html`)

**ç›®çš„**: å³æ™‚ç¾é‡‘åŒ–å¯èƒ½è³‡ç”£ã‹ã‚‰ç·è² å‚µã‚’å¼•ã„ãŸç‹¬è‡ªPBRï¼ˆNetNetPBRï¼‰ã‚’ç®—å‡ºã—ã€å‰²å®‰æ ªã‚’ç™ºæ˜

**è¨ˆç®—å¼**:

```
NetNetPBR = (ç¾é‡‘ + æœ‰ä¾¡è¨¼åˆ¸ + å£²æ›é‡‘ Ã— 0.75 + æ£šå¸è³‡ç”£ Ã— 0.5 - è² å‚µåˆè¨ˆ) / æ™‚ä¾¡ç·é¡
```

**åˆ¤å®šåŸºæº–**:

- NetNetPBR > 1.5: **è¶…å‰²å®‰**ï¼ˆç·‘è‰²ï¼‰
- NetNetPBR > 1.0: **å‰²å®‰**ï¼ˆé»„è‰²ï¼‰
- NetNetPBR > 0.5: **ã‚„ã‚„å‰²å®‰**ï¼ˆç™½è‰²ï¼‰
- NetNetPBR â‰¤ 0.5: **å¯¾è±¡å¤–**ï¼ˆã‚°ãƒ¬ãƒ¼ï¼‰

**è¡¨ç¤ºé …ç›®**:

| é …ç›® | èª¬æ˜ |
|------|------|
| è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰ | 4æ¡ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: 9501ï¼‰ |
| ä¼æ¥­å | æ­£å¼åç§° |
| NetNetPBR | ç‹¬è‡ªPBRå€¤ |
| æ™‚ä¾¡ç·é¡ | ç¾åœ¨ã®æ™‚ä¾¡ç·é¡ï¼ˆå„„å††ï¼‰ |
| æœ€æ–°æ±ºç®—æ—¥ | æœ€æ–°ã®è²¡å‹™ãƒ‡ãƒ¼ã‚¿åŸºæº–æ—¥ |

**ã‚½ãƒ¼ãƒˆ**:

- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: NetNetPBRé™é †
- ã‚¯ãƒªãƒƒã‚¯å¯èƒ½: å…¨ã‚«ãƒ©ãƒ æ˜‡é †/é™é †

**ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**:

- ã‚»ã‚¯ã‚¿ãƒ¼é¸æŠï¼ˆé›»æ°—ãƒ»ã‚¬ã‚¹æ¥­ã€æƒ…å ±ãƒ»é€šä¿¡æ¥­ç­‰ï¼‰
- NetNetPBRé–¾å€¤ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆ0.5ã€œ2.0ï¼‰

#### 2. O'Neilæˆé•·æ ªç™ºæ˜ (`src/pages/oneil.html`)

**ç›®çš„**: ã‚¦ã‚£ãƒªã‚¢ãƒ ãƒ»ã‚ªãƒ‹ãƒ¼ãƒ«ã®æˆé•·æ ªæ‰‹æ³•ã«åŸºã¥ãã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°

**æŒ‡æ¨™**:

1. **EPSæˆé•·ç‡ï¼ˆ3å¹´ï¼‰**: 
   ```
   ((æœ€æ–°EPS - 3å¹´å‰EPS) / 3å¹´å‰EPS) Ã— 100
   ```

2. **EPSæˆé•·ç‡ï¼ˆ5å¹´ï¼‰**: 
   ```
   ((æœ€æ–°EPS - 5å¹´å‰EPS) / 5å¹´å‰EPS) Ã— 100
   ```

3. **ãƒªãƒ©ãƒ†ã‚£ãƒ–ã‚¹ãƒˆãƒ¬ãƒ³ã‚°ã‚¹ï¼ˆRSï¼‰**:
   ```
   RS = (å€‹åˆ¥æ ª60æ—¥é¨°è½ç‡ / TOPIX60æ—¥é¨°è½ç‡) Ã— 100
   ```

**åˆ¤å®šåŸºæº–**:

- EPS 3å¹´æˆé•·ç‡ > 25%
- EPS 5å¹´æˆé•·ç‡ > 15%
- RS > 80

**æ±ºç®—ç™ºè¡¨æ—¥ãƒãƒ¼ã‚«ãƒ¼**:

- ğŸ”´ ç›´è¿‘30æ—¥ä»¥å†…ã«æ±ºç®—ç™ºè¡¨
- ğŸŸ¡ 30ã€œ60æ—¥ä»¥å†…ã«æ±ºç®—ç™ºè¡¨

#### 3. ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•æ¤œå‡º (`src/pages/market-top.html`)

**ç›®çš„**: ã‚¦ã‚£ãƒªã‚¢ãƒ ãƒ»ã‚ªãƒ‹ãƒ¼ãƒ«ã®åˆ†é…æ—¥ã‚«ã‚¦ãƒ³ãƒˆæ‰‹æ³•

**ãƒ«ãƒ¼ãƒ«**:

25å–¶æ¥­æ—¥ä»¥å†…ã«ä»¥ä¸‹ã®æ¡ä»¶ã‚’5å›ä»¥ä¸Šæº€ãŸã™å ´åˆã€ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•ã¨åˆ¤å®š:

1. **TOPIXé¨°è½ç‡ < -0.2%**ï¼ˆå‰æ—¥æ¯”ï¼‰
2. **å‡ºæ¥é«˜ > å‰æ—¥å‡ºæ¥é«˜**

**è¡¨ç¤º**:

```mermaid
flowchart TB
    A[åˆ†é…æ—¥ã‚«ã‚¦ãƒ³ãƒˆé–‹å§‹] --> B{25å–¶æ¥­æ—¥ä»¥å†…?}
    B -->|Yes| C[æ¡ä»¶ãƒã‚§ãƒƒã‚¯]
    C --> D{TOPIX < -0.2% AND å‡ºæ¥é«˜å¢—?}
    D -->|Yes| E[ã‚«ã‚¦ãƒ³ãƒˆ+1]
    D -->|No| F[ã‚«ã‚¦ãƒ³ãƒˆç¶­æŒ]
    E --> G{ã‚«ã‚¦ãƒ³ãƒˆ >= 5?}
    F --> G
    G -->|Yes| H[ğŸš¨ ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•è­¦å‘Š]
    G -->|No| I[ç¶™ç¶šç›£è¦–]
    B -->|No| J[ã‚«ã‚¦ãƒ³ãƒˆãƒªã‚»ãƒƒãƒˆ]
    
    style H fill:#ffcdd2
    style I fill:#c8e6c9
```

**èƒŒæ™¯è‰²**:

- åˆ†é…æ—¥ã‚«ã‚¦ãƒ³ãƒˆ >= 5: èµ¤è‰²èƒŒæ™¯
- åˆ†é…æ—¥ã‚«ã‚¦ãƒ³ãƒˆ 3ã€œ4: é»„è‰²èƒŒæ™¯
- åˆ†é…æ—¥ã‚«ã‚¦ãƒ³ãƒˆ < 3: ç™½è‰²èƒŒæ™¯

### UI/UXä»•æ§˜

#### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

```css
/* ãƒ¢ãƒã‚¤ãƒ«ï¼ˆ< 768pxï¼‰ */
@media (max-width: 767px) {
    .navbar { flex-direction: column; }
    .table { font-size: 12px; }
}

/* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆ768pxã€œ1024pxï¼‰ */
@media (min-width: 768px) and (max-width: 1023px) {
    .container { max-width: 750px; }
}

/* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆ>= 1024pxï¼‰ */
@media (min-width: 1024px) {
    .container { max-width: 1200px; }
}
```

#### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

```css
:root {
    --primary: #2196F3;        /* ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼ */
    --success: #4CAF50;        /* æˆåŠŸãƒ»å‰²å®‰ */
    --warning: #FFC107;        /* è­¦å‘Šãƒ»ã‚„ã‚„å‰²å®‰ */
    --danger: #F44336;         /* å±é™ºãƒ»å¤©äº•è­¦å‘Š */
    --text: #212121;           /* ãƒ†ã‚­ã‚¹ãƒˆ */
    --bg: #FAFAFA;             /* èƒŒæ™¯ */
}
```

#### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

- ãƒšãƒ¼ã‚¸é·ç§»: ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ï¼ˆ300msï¼‰
- ãƒ†ãƒ¼ãƒ–ãƒ«ã‚½ãƒ¼ãƒˆ: ã‚¹ãƒ©ã‚¤ãƒ‰ï¼ˆ200msï¼‰
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°: ã‚¹ãƒ”ãƒŠãƒ¼è¡¨ç¤º

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### SQLiteã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–

```sql
-- ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹é«˜é€ŸåŒ–
CREATE INDEX idx_financials_company_date ON financials(company_id, filing_date DESC);
CREATE INDEX idx_stock_prices_company_date ON stock_prices(company_id, date DESC);

-- éƒ¨åˆ†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆWHEREå¥ä»˜ãï¼‰
CREATE INDEX idx_analysis_cache_netnet 
    ON analysis_cache(analysis_type, netnet_pbr) 
    WHERE analysis_type = 'netnet' AND netnet_pbr IS NOT NULL;
```

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

1. **è§£æçµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥**: `analysis_cache`ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
2. **TTL**: 24æ™‚é–“ï¼ˆæ—¥æ¬¡æ›´æ–°ï¼‰
3. **ç„¡åŠ¹åŒ–**: æ–°è¦è²¡å‹™ãƒ‡ãƒ¼ã‚¿å–å¾—æ™‚

### ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**React Router v6ä½¿ç”¨**

```typescript
// basenameè¨­å®šï¼ˆGitHub Pageså¯¾å¿œï¼‰
const basename = import.meta.env.MODE === 'production' ? '/ToDo/' : '/'

// ãƒ«ãƒ¼ãƒˆå®šç¾©
<Routes>
  <Route path="/" element={<HomePage />} />
  <Route path="/testuser-todo" element={<TestUserTodo />} />
  {dynamicPages.map(page => (
    <Route 
      key={page.path} 
      path={page.path} 
      element={<DynamicTodoPage userName={page.name} />} 
    />
  ))}
  <Route path="*" element={<Navigate to="/" replace />} />
</Routes>
```

### ãƒšãƒ¼ã‚¸æ§‹æˆ

#### 1. HomePage (`/`)

**ç›®çš„**: ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒšãƒ¼ã‚¸ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¦‚è¦è¡¨ç¤º

**è¡¨ç¤ºå†…å®¹**:

- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å
- èª¬æ˜æ–‡
- TestUserãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯

#### 2. TestUserTodo (`/testuser-todo`)

**ç›®çš„**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«Todoãƒšãƒ¼ã‚¸

**æ©Ÿèƒ½**:

- ã‚¿ã‚¹ã‚¯è¿½åŠ 
- ã‚¿ã‚¹ã‚¯å®Œäº†åˆ‡ã‚Šæ›¿ãˆ
- ã‚¿ã‚¹ã‚¯å€‹åˆ¥å‰Šé™¤
- å®Œäº†ã‚¿ã‚¹ã‚¯ä¸€æ‹¬å‰Šé™¤
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åˆ‡ã‚Šæ›¿ãˆ
- LocalStorageè‡ªå‹•ä¿å­˜

**StorageKey**: `TestUser-todos`

#### 3. DynamicTodoPage (`/{name}-todo`)

**ç›®çš„**: å‹•çš„ã«ä½œæˆã•ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼å°‚ç”¨Todoãƒšãƒ¼ã‚¸

**æ©Ÿèƒ½**: TestUserTodoã¨åŒã˜

**Props**:

```typescript
interface DynamicTodoPageProps {
  userName: string  // ä¾‹: "Tanaka", "ç”°ä¸­", "æµœå´ ç§€å¯¿"
}
```

**StorageKeyç”Ÿæˆ**:

```typescript
const storageKey = generateStorageKey(userName)
// ä¾‹: "Tanaka-todos", "ç”°ä¸­-todos", "æµœå´-ç§€å¯¿-todos"
```

### ã‚µã‚¤ãƒ‰ãƒãƒ¼

**ç›®çš„**: ãƒšãƒ¼ã‚¸ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒšãƒ¼ã‚¸ç®¡ç†

**æ©Ÿèƒ½**:

1. **ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**

   - ãƒ›ãƒ¼ãƒ ãƒªãƒ³ã‚¯
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒšãƒ¼ã‚¸ãƒªãƒ³ã‚¯ä¸€è¦§
2. **ãƒšãƒ¼ã‚¸è¿½åŠ **

   - åå‰å…¥åŠ›ï¼ˆæ—¥æœ¬èªå¯¾å¿œï¼‰
   - ã‚¢ã‚¤ã‚³ãƒ³é¸æŠ
   - è¿½åŠ ãƒœã‚¿ãƒ³
3. **ãƒšãƒ¼ã‚¸ç·¨é›†**

   - ãƒšãƒ¼ã‚¸åå¤‰æ›´
   - ä¿å­˜/ã‚­ãƒ£ãƒ³ã‚»ãƒ«
4. **ãƒšãƒ¼ã‚¸å‰Šé™¤**

   - å‰Šé™¤ãƒœã‚¿ãƒ³ï¼ˆğŸ—‘ï¸ï¼‰
   - ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
   - ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿ã‚‚å‰Šé™¤

**æ³¨æ„**: ãƒšãƒ¼ã‚¸ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤å¾Œã¯é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®å†èµ·å‹•ãŒå¿…è¦

### LocalStorageæ§‹é€ 

**ã‚­ãƒ¼å‘½åè¦å‰‡**:

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒšãƒ¼ã‚¸ä¸€è¦§: `userPages`
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¹ã‚¯: `{name}-todos`

**ãƒ‡ãƒ¼ã‚¿ä¾‹**:

```json
// LocalStorage["userPages"]
[
  {
    "name": "TestUser",
    "path": "/testuser-todo",
    "icon": "ğŸ“"
  },
  {
    "name": "ç”°ä¸­",
    "path": "/tanaka-todo",
    "icon": "ğŸ‘¤"
  }
]

// LocalStorage["TestUser-todos"]
[
  {
    "id": 1731556800000,
    "text": "ãƒ†ã‚¹ãƒˆã‚¿ã‚¹ã‚¯1",
    "completed": false,
    "createdAt": "2025-11-14T00:00:00.000Z"
  },
  {
    "id": 1731556900000,
    "text": "ãƒ†ã‚¹ãƒˆã‚¿ã‚¹ã‚¯2",
    "completed": true,
    "createdAt": "2025-11-14T00:05:00.000Z"
  }
]
```

---

## æ©Ÿèƒ½å®Ÿè£…è©³ç´°

### 1. ã‚¿ã‚¹ã‚¯è¿½åŠ 

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼**: US-001
**å—å…¥åŸºæº–**: AS-001

**å®Ÿè£…**:

```typescript
const addTodo = useCallback(() => {
  if (!inputText.trim()) return  // ç©ºæ–‡å­—ãƒã‚§ãƒƒã‚¯
  
  const newTodo: TodoItem = {
    id: Date.now(),  // ãƒ¦ãƒ‹ãƒ¼ã‚¯IDç”Ÿæˆ
    text: inputText.trim(),
    completed: false,
    createdAt: new Date().toISOString()
  }
  
  setTodos(prev => [...prev, newTodo])
  setInputText('')  // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¯ãƒªã‚¢
}, [inputText])
```

**Enterã‚­ãƒ¼å¯¾å¿œ**:

```typescript
const handleKeyPress = (e: React.KeyboardEvent) => {
  if (e.key === 'Enter') {
    addTodo()
  }
}
```

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:

- ç©ºæ–‡å­—: è¿½åŠ ä¸å¯
- 500æ–‡å­—è¶…é: å…¥åŠ›åˆ¶é™ï¼ˆHTML maxlengthï¼‰
- å‰å¾Œç©ºç™½: è‡ªå‹•ãƒˆãƒªãƒ 

### 2. ã‚¿ã‚¹ã‚¯å®Œäº†åˆ‡ã‚Šæ›¿ãˆ

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼**: US-001
**å—å…¥åŸºæº–**: AS-002

**å®Ÿè£…**:

```typescript
const toggleTodo = useCallback((id: number) => {
  setTodos(prev =>
    prev.map(todo =>
      todo.id === id 
        ? { ...todo, completed: !todo.completed } 
        : todo
    )
  )
}, [])
```

**UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**:

- ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹: checkedçŠ¶æ…‹
- ãƒ†ã‚­ã‚¹ãƒˆ: line-throughè£…é£¾
- è‰²: ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆ

### 3. ã‚¿ã‚¹ã‚¯å€‹åˆ¥å‰Šé™¤

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼**: US-001
**å—å…¥åŸºæº–**: AS-004

**å®Ÿè£…**:

```typescript
const deleteTodo = useCallback((id: number) => {
  setTodos(prev => prev.filter(todo => todo.id !== id))
}, [])
```

**UIãƒœã‚¿ãƒ³**: ğŸ—‘ï¸ ã‚¢ã‚¤ã‚³ãƒ³

### 4. å®Œäº†ã‚¿ã‚¹ã‚¯ä¸€æ‹¬å‰Šé™¤

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼**: US-001
**å—å…¥åŸºæº–**: AS-007

**å®Ÿè£…**:

```typescript
const clearCompleted = useCallback(() => {
  setTodos(prev => prev.filter(todo => !todo.completed))
}, [])
```

**è¡¨ç¤ºæ¡ä»¶**: å®Œäº†ã‚¿ã‚¹ã‚¯ãŒ1ã¤ä»¥ä¸Šå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿è¡¨ç¤º

**UIãƒœã‚¿ãƒ³**: ã€ŒğŸ—‘ï¸ å®Œäº†ã‚¿ã‚¹ã‚¯ã‚’ã‚¯ãƒªã‚¢ (n)ã€

### 5. ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼**: US-001
**å—å…¥åŸºæº–**: AS-003

**å®Ÿè£…**:

```typescript
const filteredTodos = useMemo(() => {
  return todos.filter(todo => {
    switch (filter) {
      case 'active':
        return !todo.completed
      case 'completed':
        return todo.completed
      default:
        return true
    }
  })
}, [todos, filter])
```

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: useMemoã§ãƒ¡ãƒ¢åŒ–

**ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³**:

- ã™ã¹ã¦ (n)
- é€²è¡Œä¸­ (n)
- å®Œäº†æ¸ˆã¿ (n)

### 6. LocalStorageè‡ªå‹•ä¿å­˜

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼**: US-005
**å—å…¥åŸºæº–**: AS-005, AS-006

**å®Ÿè£…**:

```typescript
// èª­ã¿è¾¼ã¿ï¼ˆåˆå›ã®ã¿ï¼‰
useEffect(() => {
  const savedTodos = localStorage.getItem(STORAGE_KEY)
  if (savedTodos) {
    try {
      const parsedTodos = JSON.parse(savedTodos)
      setTodos(parsedTodos)
    } catch (error) {
      console.error('Failed to load todos:', error)
    }
  }
  setIsLoaded(true)
}, [STORAGE_KEY])

// ä¿å­˜ï¼ˆtodoså¤‰æ›´æ™‚ï¼‰
useEffect(() => {
  if (!isLoaded) return  // åˆå›ãƒ­ãƒ¼ãƒ‰å®Œäº†ã¾ã§ä¿å­˜ã—ãªã„
  
  try {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(todos))
  } catch (error) {
    console.error('Failed to save todos:', error)
  }
}, [todos, STORAGE_KEY, isLoaded])
```

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:

- JSON parseå¤±æ•—: ç©ºé…åˆ—ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- Quotaè¶…é: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼å‡ºåŠ›

### 7. ãƒšãƒ¼ã‚¸è¿½åŠ 

**å®Ÿè£…ï¼ˆuserPages.tsï¼‰**:

```typescript
export const addUserPage = (name: string, icon: string = 'ğŸ“'): boolean => {
  try {
    if (!name || name.trim() === '') {
      console.error('ãƒšãƒ¼ã‚¸åã¯å¿…é ˆã§ã™')
      return false
    }
  
    // ãƒ‘ã‚¹ç”Ÿæˆï¼ˆå°æ–‡å­—ã€ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Šï¼‰
    const pageName = name.trim().toLowerCase().replace(/\s+/g, '-')
    const path = `/${pageName}-todo`
  
    // é‡è¤‡ãƒã‚§ãƒƒã‚¯
    const exists = userPages.some(page => 
      page.name === name || page.path === path
    )
    if (exists) {
      console.error(`ãƒšãƒ¼ã‚¸ "${name}" ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™`)
      return false
    }
  
    // è¿½åŠ 
    userPages.push({
      name: name.trim(),
      path,
      icon
    })
  
    // LocalStorageã«ä¿å­˜
    localStorage.setItem('userPages', JSON.stringify(userPages))
  
    // ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ï¼ˆUIã‚’æ›´æ–°ï¼‰
    window.dispatchEvent(new Event('userPagesUpdated'))
  
    return true
  } catch (error) {
    console.error('ãƒšãƒ¼ã‚¸è¿½åŠ ã‚¨ãƒ©ãƒ¼:', error)
    return false
  }
}
```

### 8. ãƒšãƒ¼ã‚¸å‰Šé™¤

**å®Ÿè£…ï¼ˆuserPages.tsï¼‰**:

```typescript
export const removeUserPage = (name: string): boolean => {
  try {
    const index = userPages.findIndex(page => page.name === name)
    if (index === -1) {
      console.error(`ãƒšãƒ¼ã‚¸ "${name}" ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`)
      return false
    }
  
    // ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿ã‚‚å‰Šé™¤
    const storageKey = `${name.trim().replace(/\s+/g, '-')}-todos`
    localStorage.removeItem(storageKey)
  
    // ãƒšãƒ¼ã‚¸å‰Šé™¤
    userPages.splice(index, 1)
  
    // LocalStorageã«ä¿å­˜
    localStorage.setItem('userPages', JSON.stringify(userPages))
  
    // ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
    window.dispatchEvent(new Event('userPagesUpdated'))
  
    return true
  } catch (error) {
    console.error('ãƒšãƒ¼ã‚¸å‰Šé™¤ã‚¨ãƒ©ãƒ¼:', error)
    return false
  }
}
```

---

## ãƒ†ã‚¹ãƒˆä»•æ§˜

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

**åˆè¨ˆ**: 106ãƒ†ã‚¹ãƒˆ**å†…è¨³**:

- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ: 68å€‹
- çµ±åˆãƒ†ã‚¹ãƒˆ: 38å€‹

**ã‚«ãƒãƒ¬ãƒƒã‚¸**: 100%

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

#### 1. types/todo.test.ts

**ãƒ†ã‚¹ãƒˆå¯¾è±¡**: å‹å®šç¾©ã¨ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°

```typescript
describe('validateTodoItem', () => {
  test('æœ‰åŠ¹ãªTodoItemã‚’æ­£ã—ãæ¤œè¨¼', () => {
    const valid: TodoItem = {
      id: 1,
      text: 'ãƒ†ã‚¹ãƒˆã‚¿ã‚¹ã‚¯',
      completed: false,
      createdAt: new Date().toISOString()
    }
    expect(validateTodoItem(valid)).toBe(true)
  })
  
  test('ç„¡åŠ¹ãªIDï¼ˆè² ã®æ•°ï¼‰ã‚’æ‹’å¦', () => {
    const invalid = { id: -1, text: 'ãƒ†ã‚¹ãƒˆ', completed: false, createdAt: new Date().toISOString() }
    expect(validateTodoItem(invalid)).toBe(false)
  })
  
  // ä»–ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ...
})

describe('generateStorageKey', () => {
  test('æ—¥æœ¬èªæ–‡å­—ã‚’ãã®ã¾ã¾ä¿æŒ', () => {
    expect(generateStorageKey('ç”°ä¸­')).toBe('ç”°ä¸­-todos')
    expect(generateStorageKey('æµœå´ç§€å¯¿')).toBe('æµœå´ç§€å¯¿-todos')
  })
  
  test('ã‚¹ãƒšãƒ¼ã‚¹ã¯ãƒã‚¤ãƒ•ãƒ³ã«å¤‰æ›', () => {
    expect(generateStorageKey('æµœå´ ç§€å¯¿')).toBe('æµœå´-ç§€å¯¿-todos')
  })
  
  test('ç©ºæ–‡å­—ã§ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼', () => {
    expect(() => generateStorageKey('')).toThrow('Invalid developer name')
  })
})
```

#### 2. components/DynamicTodoPage.test.tsx

**ãƒ†ã‚¹ãƒˆå¯¾è±¡**: å‹•çš„Todoãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```typescript
describe('DynamicTodoPage', () => {
  test('ãƒ¦ãƒ¼ã‚¶ãƒ¼åãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    const userName = 'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼'
    render(
      <BrowserRouter>
        <DynamicTodoPage userName={userName} />
      </BrowserRouter>
    )
    expect(screen.getByText(new RegExp(userName, 'i'))).toBeInTheDocument()
  })
  
  test('æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã§ãã‚‹', async () => {
    render(<BrowserRouter><DynamicTodoPage userName="ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼" /></BrowserRouter>)
  
    const input = screen.getByPlaceholderText(/ã‚¿ã‚¹ã‚¯|TODO|è¿½åŠ /i)
    const addButton = screen.getByRole('button', { name: /è¿½åŠ |Add/i })
  
    fireEvent.change(input, { target: { value: 'æ–°ã—ã„ã‚¿ã‚¹ã‚¯' } })
    fireEvent.click(addButton)
  
    await waitFor(() => {
      expect(screen.getByText('æ–°ã—ã„ã‚¿ã‚¹ã‚¯')).toBeInTheDocument()
    })
  })
})
```

### çµ±åˆãƒ†ã‚¹ãƒˆ

#### 1. task-operations.test.tsx

**ãƒ†ã‚¹ãƒˆå¯¾è±¡**: ã‚¿ã‚¹ã‚¯æ“ä½œã®çµ±åˆãƒ•ãƒ­ãƒ¼

```typescript
describe('Task Operations Integration Tests (US1)', () => {
  beforeEach(() => {
    localStorage.clear()
  })
  
  test('AS-001: ç©ºã§ãªã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã§ãã‚‹', async () => {
    render(<BrowserRouter><TestUserTodo /></BrowserRouter>)
  
    const input = screen.getByPlaceholderText(/æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›/)
    const addButton = screen.getByRole('button', { name: /â• è¿½åŠ / })
  
    fireEvent.change(input, { target: { value: 'ãƒ†ã‚¹ãƒˆã‚¿ã‚¹ã‚¯1' } })
    fireEvent.click(addButton)
  
    await waitFor(() => {
      expect(screen.getByText('ãƒ†ã‚¹ãƒˆã‚¿ã‚¹ã‚¯1')).toBeInTheDocument()
    })
  
    expect(input).toHaveValue('')  // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¯ãƒªã‚¢ç¢ºèª
  })
  
  test('AS-001: Enterã‚­ãƒ¼ã§ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã§ãã‚‹', async () => {
    render(<BrowserRouter><TestUserTodo /></BrowserRouter>)
  
    const input = screen.getByPlaceholderText(/æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›/)
  
    fireEvent.change(input, { target: { value: 'Enterã§ã‚¿ã‚¹ã‚¯è¿½åŠ ' } })
    fireEvent.keyDown(input, { key: 'Enter', code: 'Enter' })
  
    await waitFor(() => {
      expect(screen.getByText('Enterã§ã‚¿ã‚¹ã‚¯è¿½åŠ ')).toBeInTheDocument()
    })
  })
})
```

#### 2. data-persistence.test.tsx

**ãƒ†ã‚¹ãƒˆå¯¾è±¡**: LocalStorageæ°¸ç¶šåŒ–

```typescript
describe('Data Persistence Integration Tests (US5)', () => {
  const STORAGE_KEY = 'TestUser-todos'
  
  test('AS-005: ã‚¿ã‚¹ã‚¯è¿½åŠ å¾Œã«localStorageã«ä¿å­˜ã•ã‚Œã‚‹', async () => {
    render(<BrowserRouter><TestUserTodo /></BrowserRouter>)
  
    const input = screen.getByPlaceholderText(/æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›/)
    const addButton = screen.getByRole('button', { name: /â• è¿½åŠ / })
  
    fireEvent.change(input, { target: { value: 'æ°¸ç¶šåŒ–ãƒ†ã‚¹ãƒˆ' } })
    fireEvent.click(addButton)
  
    await waitFor(() => {
      expect(screen.getByText('æ°¸ç¶šåŒ–ãƒ†ã‚¹ãƒˆ')).toBeInTheDocument()
    })
  
    const savedData = localStorage.getItem(STORAGE_KEY)
    expect(savedData).toBeTruthy()
  
    const todos = JSON.parse(savedData!)
    expect(todos).toHaveLength(1)
    expect(todos[0].text).toBe('æ°¸ç¶šåŒ–ãƒ†ã‚¹ãƒˆ')
  })
  
  test('AS-005: ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰å¾Œã‚‚ã‚¿ã‚¹ã‚¯ãŒä¿æŒã•ã‚Œã‚‹', async () => {
    // æœ€åˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    const { unmount } = render(<BrowserRouter><TestUserTodo /></BrowserRouter>)
  
    const input = screen.getByPlaceholderText(/æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›/)
    const addButton = screen.getByRole('button', { name: /â• è¿½åŠ / })
  
    fireEvent.change(input, { target: { value: 'ãƒªãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ' } })
    fireEvent.click(addButton)
  
    await waitFor(() => {
      expect(screen.getByText('ãƒªãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ')).toBeInTheDocument()
    })
  
    // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆï¼ˆãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
    unmount()
  
    // å†åº¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    render(<BrowserRouter><TestUserTodo /></BrowserRouter>)
  
    // ã‚¿ã‚¹ã‚¯ãŒå¾©å…ƒã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
    await waitFor(() => {
      expect(screen.getByText('ãƒªãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ')).toBeInTheDocument()
    })
  })
})
```

#### 3. edge-cases.test.tsx

**ãƒ†ã‚¹ãƒˆå¯¾è±¡**: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹

```typescript
describe('Edge Cases Tests', () => {
  test('Edge-001: é•·ã„ã‚¿ã‚¹ã‚¯åï¼ˆ500æ–‡å­—ï¼‰ã‚’æ­£ã—ãå‡¦ç†ã§ãã‚‹', async () => {
    render(<BrowserRouter><TestUserTodo /></BrowserRouter>)
  
    const input = screen.getByPlaceholderText(/æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›/)
    const addButton = screen.getByRole('button', { name: /â• è¿½åŠ / })
  
    const longTaskName = 'ã‚'.repeat(500)
  
    fireEvent.change(input, { target: { value: longTaskName } })
    fireEvent.click(addButton)
  
    await waitFor(() => {
      expect(screen.getByText(longTaskName)).toBeInTheDocument()
    })
  
    const savedData = localStorage.getItem('TestUser-todos')
    const todos = JSON.parse(savedData!)
    expect(todos[0].text).toBe(longTaskName)
    expect(todos[0].text.length).toBe(500)
  })
  
  test('Edge-007: generateStorageKeyãŒæ—¥æœ¬èªã‚’å«ã‚€æ–‡å­—åˆ—ã‚’ã‚µãƒãƒ¼ãƒˆ', () => {
    const japaneseName = 'ç”°ä¸­å¤ªéƒ'
    const key = generateStorageKey(japaneseName)
    expect(key).toBe('ç”°ä¸­å¤ªéƒ-todos')
  
    const nameWithSpace = 'æµœå´ ç§€å¯¿'
    const keyWithHyphen = generateStorageKey(nameWithSpace)
    expect(keyWithHyphen).toBe('æµœå´-ç§€å¯¿-todos')
  })
})
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```powershell
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
npm run test:watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
npm run test:coverage
```

**æœŸå¾…çµæœ**:

```
Test Files  24 passed (24)
     Tests  106 passed (106)
  Start at  XX:XX:XX
  Duration  X.XXs
```

---

---

## ãƒ†ã‚¹ãƒˆä»•æ§˜

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

```mermaid
flowchart TB
    subgraph UnitTests["å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆ8ãƒ†ã‚¹ãƒˆï¼‰"]
        U1[DBåˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ]
        U2[ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆãƒ†ã‚¹ãƒˆ]
        U3[ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆãƒ†ã‚¹ãƒˆ]
        U4[ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ]
        U5[æ¤œè¨¼é–¢æ•°ãƒ†ã‚¹ãƒˆ]
        U6[ã‚¹ã‚­ãƒ¼ãƒæ§‹é€ ãƒ†ã‚¹ãƒˆ]
        U7[å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ãƒ†ã‚¹ãƒˆ]
        U8[PRAGMAè¨­å®šãƒ†ã‚¹ãƒˆ]
    end
    
    subgraph IntegrationTests["çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆä»Šå¾Œå®Ÿè£…ï¼‰"]
        I1[ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³]
        I2[è§£æã‚¨ãƒ³ã‚¸ãƒ³]
        I3[ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰]
    end
    
    subgraph E2ETests["E2Eãƒ†ã‚¹ãƒˆï¼ˆä»Šå¾Œå®Ÿè£…ï¼‰"]
        E1[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ª]
        E2[ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶]
    end
    
    U1 --> U2 --> U3 --> U4 --> U5 --> U6 --> U7 --> U8
    U8 --> I1
    I1 --> I2
    I2 --> I3
    I3 --> E1
    E1 --> E2
    
    style U1 fill:#c8e6c9
    style U2 fill:#c8e6c9
    style U3 fill:#c8e6c9
    style U4 fill:#c8e6c9
    style U5 fill:#c8e6c9
    style U6 fill:#c8e6c9
    style U7 fill:#c8e6c9
    style U8 fill:#c8e6c9
    style I1 fill:#fff9c4
    style I2 fill:#fff9c4
    style I3 fill:#fff9c4
    style E1 fill:#e0e0e0
    style E2 fill:#e0e0e0
```

### å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆtests/test_init_db.pyï¼‰

#### TestInitDatabaseï¼ˆ4ãƒ†ã‚¹ãƒˆï¼‰

```python
def test_init_database_creates_tables(tmp_db):
    """ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆãƒ†ã‚¹ãƒˆ"""
    # Given: ä¸€æ™‚DBãƒ‘ã‚¹
    # When: init_database()å®Ÿè¡Œ
    # Then: 6ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆç¢ºèª
    
def test_init_database_creates_indexes(tmp_db):
    """ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆãƒ†ã‚¹ãƒˆ"""
    # Then: 10å€‹ä»¥ä¸Šã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆç¢ºèª
    
def test_init_database_creates_sample_data(tmp_db):
    """ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ä½œæˆãƒ†ã‚¹ãƒˆ"""
    # Then: 2ç¤¾ä»¥ä¸Šã®ã‚µãƒ³ãƒ—ãƒ«ä¼æ¥­ç¢ºèª
    
def test_verify_database_returns_true(tmp_db):
    """æ¤œè¨¼é–¢æ•°ãƒ†ã‚¹ãƒˆ"""
    # Then: verify_database()ãŒTrueã‚’è¿”ã™
```

#### TestDatabaseSchemaï¼ˆ4ãƒ†ã‚¹ãƒˆï¼‰

```python
def test_companies_table_structure(db_conn):
    """companiesãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ãƒ†ã‚¹ãƒˆ"""
    # Then: idã‚«ãƒ©ãƒ ãŒPRIMARY KEY
    
def test_financials_table_structure(db_conn):
    """financialsãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ãƒ†ã‚¹ãƒˆ"""
    # Then: company_idã‚«ãƒ©ãƒ ãŒå­˜åœ¨
    
def test_stock_prices_table_structure(db_conn):
    """stock_pricesãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ãƒ†ã‚¹ãƒˆ"""
    # Then: dateã‚«ãƒ©ãƒ ãŒå­˜åœ¨
    
def test_foreign_key_constraints(db_conn):
    """å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ãƒ†ã‚¹ãƒˆ"""
    # Then: PRAGMA foreign_keys=1ï¼ˆæœ‰åŠ¹åŒ–ç¢ºèªï¼‰
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```powershell
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
py -m pytest tests/ -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
py -m pytest tests/ --cov=scripts --cov-report=term --cov-report=html

# ç‰¹å®šãƒ†ã‚¹ãƒˆã®ã¿
py -m pytest tests/test_init_db.py::TestInitDatabase::test_init_database_creates_tables -v
```

**æœŸå¾…çµæœ**:
```
========= 8 passed in 1.39s =========
Name                       Stmts   Miss  Cover
----------------------------------------------
scripts/init_db.py            157      0   100%
----------------------------------------------
TOTAL                         157      0   100%
```

### ãƒ†ã‚¹ãƒˆå“è³ªåŸºæº–

- **TR-001**: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 100%
- **TR-002**: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ < 30ç§’
- **TR-003**: å…¨æ©Ÿèƒ½ã«å˜ä½“ãƒ†ã‚¹ãƒˆ + çµ±åˆãƒ†ã‚¹ãƒˆ
- **TR-004**: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ç¶²ç¾…ï¼ˆç©ºãƒ‡ãƒ¼ã‚¿ã€ç•°å¸¸å€¤ï¼‰

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ä»•æ§˜

### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TB
    subgraph Local["ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º"]
        A1[ã‚³ãƒ¼ãƒ‰ç·¨é›†]
        A2[ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ<br/>pytest]
        A3[DBåˆæœŸåŒ–<br/>init_db.py]
        A4[ãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼<br/>start.ps1]
    end
    
    subgraph GitHub["GitHubãƒªãƒã‚¸ãƒˆãƒª"]
        B1[git push origin main]
        B2[GitHub Actions<br/>ãƒˆãƒªã‚¬ãƒ¼]
    end
    
    subgraph CI["CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³"]
        C1[Setup Python 3.11]
        C2[Install dependencies]
        C3[Initialize database]
        C4[Insert sample data]
        C5[Upload artifact<br/>src/]
    end
    
    subgraph CD["GitHub Pages"]
        D1[Deploy Pages]
        D2[CDNé…ä¿¡]
        D3[å…¬é–‹URL]
    end
    
    subgraph Users["ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼"]
        E1[ãƒ–ãƒ©ã‚¦ã‚¶ã‚¢ã‚¯ã‚»ã‚¹]
        E2[æ ªå¼åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
    end
    
    A1 --> A2
    A2 --> A3
    A3 --> A4
    A4 --> B1
    B1 --> B2
    B2 --> C1
    C1 --> C2
    C2 --> C3
    C3 --> C4
    C4 --> C5
    C5 --> D1
    D1 --> D2
    D2 --> D3
    D3 --> E1
    E1 --> E2
    
    style A4 fill:#c8e6c9
    style C5 fill:#fff9c4
    style D3 fill:#c5cae9
    style E2 fill:#e1bee7
```

### GitHub Actionsè¨­å®šï¼ˆ.github/workflows/deploy.ymlï¼‰

```yaml
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main
  workflow_dispatch:
  schedule:
    - cron: '0 1 * * *'  # æ¯æ—¥10:00 JST

permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          lfs: true
      
      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
      
      - name: Initialize database
        run: |
          python scripts/init_db.py --db data/db/stock-analysis.db --schema schema.sql --force
      
      - name: Insert sample data
        run: |
          python scripts/insert_sample_data.py --db data/db/stock-analysis.db
      
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: src
  
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

#### 1. GitHub Pagesåˆå›è¨­å®š

1. ãƒªãƒã‚¸ãƒˆãƒªã® **Settings** > **Pages** ã‚’é–‹ã
2. **Source**: ã€Œ**GitHub Actions**ã€ã‚’é¸æŠ
3. è‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã‚‹

#### 2. è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

mainãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨è‡ªå‹•çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤:

```powershell
git add -A
git commit -m "feat: implement feature X"
git push origin main
```

#### 3. æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤

GitHub Actionsã®UIã‹ã‚‰æ‰‹å‹•å®Ÿè¡Œ:

1. https://github.com/J1921604/stock-analysis/actions
2. ã€ŒDeploy to GitHub Pagesã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é¸æŠ
3. ã€ŒRun workflowã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. Branch: `main` ã‚’é¸æŠ
5. ã€ŒRun workflowã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### 4. ãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª

1. GitHub Actionså®Ÿè¡Œãƒ­ã‚°ã‚’ç¢ºèªï¼ˆç´„2-4åˆ†ï¼‰
2. ç·‘è‰²ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ç¢ºèª
3. å…¬é–‹URLã«ã‚¢ã‚¯ã‚»ã‚¹:
   ```
   https://j1921604.github.io/stock-analysis/
   ```

### ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

- **ãƒ—ãƒƒã‚·ãƒ¥æ™‚**: mainãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥æ™‚
- **æ—¥æ¬¡è‡ªå‹•**: æ¯æ—¥10:00 JSTï¼ˆcron: `0 1 * * *`ï¼‰
- **æ‰‹å‹•å®Ÿè¡Œ**: workflow_dispatch

### ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] `py -m pytest tests/ -v` â†’ 8/8 PASS
- [ ] `.\start.ps1` â†’ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æˆåŠŸ
- [ ] `git status` â†’ ã‚³ãƒŸãƒƒãƒˆæ¼ã‚Œãªã—
- [ ] `.gitignore` â†’ æ©Ÿå¯†æƒ…å ±é™¤å¤–ç¢ºèª
- [ ] `requirements.txt` â†’ ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æœ€æ–°
- [ ] `schema.sql` â†’ ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´åæ˜ 
- [ ] `README.md` â†’ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã‚¨ãƒ©ãƒ¼1: "EOFError: EOF when reading a line"

**åŸå› **: CIç’°å¢ƒã§ã®å¯¾è©±çš„å…¥åŠ›

**è§£æ±ºç­–**: `--force`ãƒ•ãƒ©ã‚°è¿½åŠ æ¸ˆã¿ï¼ˆä¿®æ­£å®Œäº†ï¼‰

#### ã‚¨ãƒ©ãƒ¼2: "Get Pages site failed"

**åŸå› **: GitHub Pagesè¨­å®šæœªå®Œäº†

**è§£æ±ºç­–**: Settings > Pages > Source: GitHub Actions

#### ã‚¨ãƒ©ãƒ¼3: "Permission denied"

**åŸå› **: GitHub Actionsæ¨©é™ä¸è¶³

**è§£æ±ºç­–**: Settings > Actions > Workflow permissions > Read and write

### GitHub Pagesè¨­å®š

#### 1. Settings â†’ Pages è¨­å®š

1. ãƒªãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ã‹ã‚‰ã€ŒSettingsã€ã‚¿ãƒ–ã‚’é–‹ã
2. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã€ŒPagesã€ã‚’é¸æŠ
3. **Source**: ã€ŒGitHub Actionsã€ã‚’é¸æŠ
4. Save

#### 2. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š

**ãƒ•ã‚¡ã‚¤ãƒ«**: `.github/workflows/deploy.yml`

```yaml
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Type check
        run: npx tsc --noEmit

      - name: Build
        run: npm run build
        env:
          NODE_ENV: production

      - name: Setup Pages
        uses: actions/configure-pages@v4

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: './dist'

  deploy:
    needs: build
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

### vite.config.tsè¨­å®š

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  base: process.env.NODE_ENV === 'production' ? '/ToDo/' : '/',
  plugins: [react()],
  server: {
    port: 1234
  }
})
```

**é‡è¦**: `base` ã¯ãƒªãƒã‚¸ãƒˆãƒªåã¨å®Œå…¨ä¸€è‡´ï¼ˆå¤§æ–‡å­—å°æ–‡å­—å«ã‚€ï¼‰

### src/main.tsxè¨­å®š

```typescript
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import App from './App'
import './index.css'

const basename = import.meta.env.MODE === 'production' ? '/ToDo/' : '/'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <BrowserRouter basename={basename}>
      <App />
    </BrowserRouter>
  </React.StrictMode>
)
```

**é‡è¦**: `basename` ã¯ `vite.config.ts` ã® `base` ã¨ä¸€è‡´

### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼

```
ã‚³ãƒ¼ãƒ‰ä¿®æ­£
    â†“
git add -A
    â†“
git commit -m "feat: æ–°æ©Ÿèƒ½è¿½åŠ "
    â†“
git push origin main
    â†“
GitHub Actions ãƒˆãƒªã‚¬ãƒ¼
    â†“
1. Checkout
2. Setup Node.js
3. Install dependencies
4. Type check (npx tsc --noEmit)
5. Build (npm run build)
6. Setup Pages
7. Upload artifact
    â†“
8. Deploy to GitHub Pages
    â†“
æœ¬ç•ªã‚µã‚¤ãƒˆæ›´æ–°
https://j1921604.github.io/ToDo/
```

**æ‰€è¦æ™‚é–“**: ç´„3ã€œ5åˆ†

### ãƒ‡ãƒ—ãƒ­ã‚¤æ¤œè¨¼

#### ãƒ“ãƒ«ãƒ‰å‰ãƒã‚§ãƒƒã‚¯

```powershell
# å‹ãƒã‚§ãƒƒã‚¯
npx tsc --noEmit

# ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
npm run build

# ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
npm run preview
# â†’ http://localhost:4173/ToDo/ ã§ç¢ºèª
```

#### ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œãƒã‚§ãƒƒã‚¯

1. **GitHub Actionsç¢ºèª**

   - https://github.com/J1921604/ToDo/actions
   - ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒç·‘è‰²ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯
2. **æœ¬ç•ªURLç¢ºèª**

   - https://j1921604.github.io/ToDo/
   - ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸è¡¨ç¤º
   - ã‚µã‚¤ãƒ‰ãƒãƒ¼è¡¨ç¤º
   - ãƒšãƒ¼ã‚¸é·ç§»å‹•ä½œ
   - Todo CRUDå‹•ä½œ
   - LocalStorageä¿å­˜å‹•ä½œ

---

## é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

```
main                  # æœ¬ç•ªç’°å¢ƒï¼ˆGitHub Pagesï¼‰
  â””â”€ feature/*        # æ©Ÿèƒ½é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒ
```

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„

```
feat: æ–°æ©Ÿèƒ½è¿½åŠ 
fix: ãƒã‚°ä¿®æ­£
docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
style: ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
refactor: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
test: ãƒ†ã‚¹ãƒˆè¿½åŠ ãƒ»ä¿®æ­£
chore: ãƒ“ãƒ«ãƒ‰ãƒ»è¨­å®šå¤‰æ›´
```

### é–‹ç™ºãƒ•ãƒ­ãƒ¼

1. **ãƒ–ãƒ©ãƒ³ãƒä½œæˆ**

   ```powershell
   git checkout -b feature/add-task-priority
   ```
2. **é–‹ç™º**

   ```powershell
   npm run dev  # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
   ```
3. **å‹ãƒã‚§ãƒƒã‚¯**

   ```powershell
   npm run type-check
   ```
4. **ãƒ†ã‚¹ãƒˆ**

   ```powershell
   npm run test
   ```
5. **ã‚³ãƒŸãƒƒãƒˆ**

   ```powershell
   git add -A
   git commit -m "feat: ã‚¿ã‚¹ã‚¯å„ªå…ˆåº¦æ©Ÿèƒ½ã‚’è¿½åŠ "
   ```
6. **mainã¸ãƒãƒ¼ã‚¸**

   ```powershell
   git checkout main
   git merge feature/add-task-priority
   git push origin main
   ```
7. **GitHub Actionsã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**

   - 3ã€œ5åˆ†å¾…æ©Ÿ
   - https://j1921604.github.io/ToDo/ ã§ç¢ºèª

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

### PR-001: åˆæœŸãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ < 2ç§’

**æ¸¬å®šæ–¹æ³•**:

```typescript
// DevTools â†’ Network ã‚¿ãƒ–
// DOMContentLoaded: < 2000ms
```

**æœ€é©åŒ–**:

- Viteã®ã‚³ãƒ¼ãƒ‰åˆ†å‰²
- React.lazyï¼ˆå°†æ¥çš„ã«ï¼‰
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºæœ€å°åŒ–

### PR-002: CRUDæ“ä½œãƒ¬ã‚¹ãƒãƒ³ã‚¹ < 100ms

**æ¸¬å®šæ–¹æ³•**:

```typescript
import { measurePerformanceSync } from './utils/performance'

const { duration } = measurePerformanceSync(() => {
  addTodo('æ–°ã—ã„ã‚¿ã‚¹ã‚¯')
}, 'Add Todo', 100)
```

**æœ€é©åŒ–**:

- useCallback ã§ãƒ¡ãƒ¢åŒ–
- useMemo ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æœ€é©åŒ–
- ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é˜²æ­¢

### PR-003: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ < 50MB

**æ¸¬å®šæ–¹æ³•**:

```typescript
// DevTools â†’ Memory ã‚¿ãƒ–
// Take heap snapshot
// JS heap size < 50MB
```

**æœ€é©åŒ–**:

- LocalStorageå®¹é‡ãƒã‚§ãƒƒã‚¯
- ä¸è¦ãªãƒ‡ãƒ¼ã‚¿å‰Šé™¤
- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

### PR-004: 1000ã‚¿ã‚¹ã‚¯ã§ã‚‚ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° < 200ms

**æ¸¬å®šæ–¹æ³•**:

```typescript
const largeTodos = Array.from({ length: 1000 }, (_, i) => ({
  id: i,
  text: `ã‚¿ã‚¹ã‚¯${i}`,
  completed: i % 2 === 0,
  createdAt: new Date().toISOString()
}))

const { duration } = measurePerformanceSync(() => {
  filterTodos(largeTodos, 'active')
}, 'Filter 1000 todos', 200)
```

**æœ€é©åŒ–**:

- useMemo ã§ãƒ¡ãƒ¢åŒ–
- ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆå°†æ¥çš„ã«ï¼‰

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: ç”»é¢ãŒçœŸã£ç™½

**ç—‡çŠ¶**: GitHub Pagesã§ç©ºç™½ãƒšãƒ¼ã‚¸è¡¨ç¤º

**åŸå› 1**: basenameä¸ä¸€è‡´

**ç¢ºèª**:

```typescript
// vite.config.ts
base: '/ToDo/'  // â† ãƒªãƒã‚¸ãƒˆãƒªåã¨ä¸€è‡´ï¼Ÿ

// src/main.tsx
const basename = '/ToDo/'  // â† vite.config.ts ã¨ä¸€è‡´ï¼Ÿ
```

**è§£æ±º**:

```typescript
// vite.config.ts
export default defineConfig({
  base: process.env.NODE_ENV === 'production' ? '/ToDo/' : '/',
})

// src/main.tsx
const basename = import.meta.env.MODE === 'production' ? '/ToDo/' : '/'
```

**åŸå› 2**: ãƒ‘ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¸ä¸€è‡´

**ç¢ºèª**:

```typescript
// src/config/userPages.ts
path: '/testuser-todo'  // â† URLå½¢å¼ï¼Ÿ (æ­£ã—ã„)
// path: './pages/TestUserTodo'  // â† ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹å½¢å¼ï¼Ÿ (èª¤ã‚Š)
```

**è§£æ±º**: ã™ã¹ã¦ã®ãƒ‘ã‚¹ã‚’URLå½¢å¼ã«çµ±ä¸€

### å•é¡Œ2: TypeScriptã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: `npm run type-check` ã§ã‚¨ãƒ©ãƒ¼

**ç¢ºèª**:

```powershell
npx tsc --noEmit
```

**ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼**:

1. **æš—é»™çš„any**

   ```typescript
   // èª¤ã‚Š
   const addTodo = (text) => { ... }

   // æ­£ã—ã„
   const addTodo = (text: string) => { ... }
   ```
2. **null/undefined**

   ```typescript
   // èª¤ã‚Š
   const savedData = localStorage.getItem(key)
   const todos = JSON.parse(savedData)  // savedDataãŒnullã®å¯èƒ½æ€§

   // æ­£ã—ã„
   const savedData = localStorage.getItem(key)
   if (savedData) {
     const todos = JSON.parse(savedData)
   }
   ```

### å•é¡Œ3: ãƒ†ã‚¹ãƒˆå¤±æ•—

**ç—‡çŠ¶**: `npm run test` ã§ã‚¨ãƒ©ãƒ¼

**ç¢ºèª**:

```powershell
npm run test -- --reporter=verbose
```

**ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼**:

1. **éåŒæœŸå‡¦ç†ã®å¾…æ©Ÿæ¼ã‚Œ**

   ```typescript
   // èª¤ã‚Š
   fireEvent.click(addButton)
   expect(screen.getByText('æ–°ã—ã„ã‚¿ã‚¹ã‚¯')).toBeInTheDocument()

   // æ­£ã—ã„
   fireEvent.click(addButton)
   await waitFor(() => {
     expect(screen.getByText('æ–°ã—ã„ã‚¿ã‚¹ã‚¯')).toBeInTheDocument()
   })
   ```
2. **LocalStorageã®ã‚¯ãƒªã‚¢æ¼ã‚Œ**

   ```typescript
   beforeEach(() => {
     localStorage.clear()
   })

   afterEach(() => {
     localStorage.clear()
   })
   ```

### å•é¡Œ4: GitHub Actionså¤±æ•—

**ç—‡çŠ¶**: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å¤±æ•—

**ç¢ºèª**:

1. https://github.com/J1921604/ToDo/actions
2. å¤±æ•—ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª

**ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼**:

1. **GitHub Pagesæœªè¨­å®š**

   ```
   Error: Not Found (404)
   Ensure GitHub Pages has been enabled
   ```

   **è§£æ±º**: Settings â†’ Pages â†’ Source: GitHub Actions
2. **ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼**

   ```
   npm run build
   Error: TypeScript errors found
   ```

   **è§£æ±º**: ãƒ­ãƒ¼ã‚«ãƒ«ã§ `npm run type-check` â†’ ã‚¨ãƒ©ãƒ¼ä¿®æ­£

### å•é¡Œ5: ãƒšãƒ¼ã‚¸è¿½åŠ å¾Œã«è¡¨ç¤ºã•ã‚Œãªã„

**ç—‡çŠ¶**: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§æ–°è¦ãƒšãƒ¼ã‚¸è¿½åŠ ã—ãŸãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: é–‹ç™ºã‚µãƒ¼ãƒãƒ¼æœªå†èµ·å‹•

**è§£æ±º**:

```powershell
# Ctrl+C ã§ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢
npm run dev  # å†èµ·å‹•
```

### å•é¡Œ6: LocalStorageãŒä¿å­˜ã•ã‚Œãªã„

**ç—‡çŠ¶**: ã‚¿ã‚¹ã‚¯è¿½åŠ å¾Œã€ãƒªãƒ­ãƒ¼ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿æ¶ˆå¤±

**åŸå› 1**: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°

**è§£æ±º**: é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã

**åŸå› 2**: LocalStorageç„¡åŠ¹

**ç¢ºèª**:

```javascript
// DevTools Console
localStorage.setItem('test', 'value')
localStorage.getItem('test')
```

**åŸå› 3**: Quotaè¶…é

**è§£æ±º**: ä¸è¦ãªãƒ‡ãƒ¼ã‚¿å‰Šé™¤

```powershell
# DevTools Application ã‚¿ãƒ– â†’ Local Storage â†’ Clear All
```

---

## ä»˜éŒ²

### A. å®Œå…¨ãªãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

```
ToDo/
â”œâ”€â”€ .github/workflows/deploy.yml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ main.tsx
â”‚   â”œâ”€â”€ index.css
â”‚   â”œâ”€â”€ vite-env.d.ts
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ atoms/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Middle.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Small.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Input/
â”‚   â”‚   â”‚       â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚       â””â”€â”€ Text.tsx
â”‚   â”‚   â””â”€â”€ organisms/
â”‚   â”‚       â””â”€â”€ Sidebar.tsx
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ userPages.ts
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx
â”‚   â”‚   â”œâ”€â”€ TestUserTodo.tsx
â”‚   â”‚   â””â”€â”€ DynamicTodoPage.tsx
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ todo.ts
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ localStorage.ts
â”‚       â””â”€â”€ performance.ts
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ setup.ts
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ App.test.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DynamicTodoPage.test.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ HomePage.test.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.test.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskInput.test.tsx
â”‚   â”‚   â”‚   â””â”€â”€ TaskItem.test.tsx
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ userPages.test.ts
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ todo.test.ts
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ localStorage.test.ts
â”‚   â”‚       â””â”€â”€ performance.test.ts
â”‚   â””â”€â”€ integration/
â”‚       â”œâ”€â”€ bulk-deletion.test.tsx
â”‚       â”œâ”€â”€ data-persistence.test.tsx
â”‚       â”œâ”€â”€ edge-cases.test.tsx
â”‚       â”œâ”€â”€ personal-page-setup.test.tsx
â”‚       â”œâ”€â”€ task-deletion.test.tsx
â”‚       â”œâ”€â”€ task-filtering.test.tsx
â”‚       â””â”€â”€ task-operations.test.tsx
â”œâ”€â”€ AI_input/
â”œâ”€â”€ specs/
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ vitest.config.ts
â”œâ”€â”€ index.html
â”œâ”€â”€ start.ps1
â””â”€â”€ README.md
```

### B. å‚è€ƒãƒªãƒ³ã‚¯

- **æœ¬ç•ªURL**: https://j1921604.github.io/ToDo/
- **GitHubãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/J1921604/ToDo
- **GitHub Actions**: https://github.com/J1921604/ToDo/actions
- **Pagesè¨­å®š**: https://github.com/J1921604/ToDo/settings/pages
- **Reactå…¬å¼**: https://react.dev/
- **Viteå…¬å¼**: https://vitejs.dev/
- **React Routerå…¬å¼**: https://reactrouter.com/
- **Vitestå…¬å¼**: https://vitest.dev/
